/*!
 * This file is part of the Goobi viewer - a content presentation and management application for digitized objects.
 *
 * Visit these websites for more information.
 * - http://www.intranda.com
 * - http://digiverso.com
 *
 * This program is free software; you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License along with this program. If not, see <http://www.gnu.org/licenses/>.
 */
var viewerJS=function(e){"use strict";var o={versions:[],json:null,imgUrl:"",imgPi:"",versionLink:"",widgetInputs:"",widgetList:""};return e.versionHistory={init:function(e){$.extend(!0,o,e),$(o.widgetInputs).each(function(){o.versions.push($(this).val())});for(var t=0;t<o.versions.length;t++)o.json=JSON.parse(o.versions[t]),o.json.id===o.imgPi?(o.versionLink="<li><span>",null!=o.json.label&&""!=o.json.label?o.versionLink+=o.json.label:(o.versionLink+=o.json.id,null!=o.json.year&&""!=o.json.year&&(o.versionLink+=" ("+o.json.year+")")),o.versionLink+="</span></li>"):(o.versionLink='<li><a href="'+o.imgUrl+"/"+o.json.id+'/1/">',null!=o.json.label&&""!=o.json.label?o.versionLink+=o.json.label:(o.versionLink+=o.json.id,null!=o.json.year&&""!=o.json.year&&(o.versionLink+=" ("+o.json.year+")")),o.versionLink+="</a></li>"),$(o.widgetList).append(o.versionLink)}},e}((viewerJS=function(e){"use strict";var t=!1;return e.userDropdown={init:function(){$(".bookshelf-navigation__dropdown:visible")&&(t=!0),$('[data-toggle="login-dropdown"]').on("click",function(e){e.stopPropagation(),t&&($(".bookshelf-navigation__dropdown").hide(),$(".bookshelf-popup").remove()),0<$(".navigation__collection-panel").length&&$(".navigation__collection-panel").hide(),$(".login-navigation__login-dropdown").slideToggle("fast")}),$('[data-toggle="user-dropdown"]').on("click",function(e){e.stopPropagation(),t&&($(".bookshelf-navigation__dropdown").hide(),$(".bookshelf-popup").remove()),0<$(".navigation__collection-panel").length&&$(".navigation__collection-panel").hide(),$(".login-navigation__user-dropdown").slideToggle("fast")}),$('[data-toggle="retrieve-account"]').on("click",function(){$(".login-navigation__retrieve-account").addClass("in")}),$('[data-dismiss="retrieve-account"]').on("click",function(){$(".login-navigation__retrieve-account").removeClass("in")}),$("body").on("click",function(e){var t=$(e.target),o=$(".login-navigation__user-dropdown, .login-navigation__login-dropdown"),n=o.find("*");t.is(o)||t.is(n)||o.hide()})}},e}((viewerJS=function(e){"use strict";var t=".user-comments__comment-content-loader";return e.userComments={init:function(){""!==$("#userCommentAdd").val()&&$("#userCommentAdd").focus().val(""),$('[data-edit="comment"]').on("click",function(){$(this).parent().removeClass("in"),$(this).parents(".user-comments__comment-content-options").find(".user-comments__comment-content-options-cancel, .user-comments__comment-content-options-save").addClass("in"),$(this).parents(".user-comments__comment-content").find(".user-comments__comment-content-options-text").removeClass("in"),$(this).parents(".user-comments__comment-content").find(".user-comments__comment-content-options-text-edit").addClass("in"),$(this).parents(".user-comments__comment-content").find(".user-comments__comment-content-options-text-edit textarea").focus()}),$('[data-edit="cancel"]').on("click",function(){$(this).parents(".user-comments__comment-content-options").find(".user-comments__comment-content-options-cancel, .user-comments__comment-content-options-save").removeClass("in"),$(this).parents(".user-comments__comment-content-options").find(".user-comments__comment-content-options-edit").addClass("in"),$(this).parents(".user-comments__comment-content").find(".user-comments__comment-content-options-text").addClass("in"),$(this).parents(".user-comments__comment-content").find(".user-comments__comment-content-options-text-edit").removeClass("in")}),$('[data-edit="save"]').on("click",function(){window.currContent=$(this).parents(".user-comments__comment-content"),window.currContent.find(t).show()}),$(t).is(":visible")&&jsf.ajax.addOnEvent(function(e){switch(e.status){case"success":window.currContent.find(t).hide()}})}},e}((viewerJS=function(e){"use strict";var t={currLang:"de",selector:"textarea.tinyMCE",width:"100%",height:400,theme:"modern",plugins:"print preview paste searchreplace autolink directionality code visualblocks visualchars fullscreen image link media template codesample table charmap hr pagebreak nonbreaking anchor toc insertdatetime advlist lists textcolor wordcount spellchecker imagetools media contextmenu colorpicker textpattern help",toolbar:"formatselect | undo redo | bold italic underline strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | fullscreen code",menubar:!1,statusbar:!1,pagebreak_separator:'<span class="pagebreak"></span>',relative_urls:!1,force_br_newlines:!1,force_p_newlines:!1,forced_root_block:"",language:"de"};return e.tinyMce={init:function(e){switch($.extend(!0,t,e),t.currLang){case"de":t.language="de";break;case"es":t.language="es";break;case"pt":t.language="pt_PT";break;case"ru":t.language="ru"}tinymce.init(t)},overview:function(){0<$(".overview__description-editor").length?viewerJS.tinyConfig.setup=function(e){e.on("init",function(e){$(".overview__publication-action .btn").hide()}),e.on("FullscreenStateChanged",function(e){e.state?$(".overview__description-action-fullscreen").addClass("in"):$(".overview__description-action-fullscreen").removeClass("in")})}:viewerJS.tinyConfig.setup=function(e){e.on("init",function(e){$(".overview__description-action .btn").hide()}),e.on("FullscreenStateChanged",function(e){e.state?$(".overview__publication-action-fullscreen").addClass("in"):$(".overview__publication-action-fullscreen").removeClass("in")})}}},e}((viewerJS=function(s){"use strict";var c=!1,o=null,d={contextPath:null,apiQuery:"api?action=timeline",startDateQuery:"&startDate=",rangeInput1:null,startDate:null,endDateQuery:"&endDate=",rangeInput2:null,endDate:null,countQuery:"&count=",count:null,$tmCanvas:null,$tmCanvasPos:null,$tmCanvasCoords:{},lang:{}};function n(e,t){c&&(console.log("viewer.timematrix _renderPopover: obj - "),console.log(e),console.log("viewer.timematrix _renderPopover: lang - "+t));var o=e.attr("data-title"),n=e.attr("data-mediumimage"),a=e.attr("data-url"),i=e.position(),l=function(e,t){c&&(console.log("viewer.timematrix _calculatePopoverPosition: triggerCoords - "),console.log(e),console.log("viewer.timematrix _calculatePopoverPosition: tmCanvasCoords - "),console.log(t));var o,n=e.left-(150-e.width/2),a=n+300,i=t.left,l=t.right,r=n;o=e.top+$(".timematrix-thumb").outerHeight()-1,n<=i&&(r=i);l<=a&&(r=t.right-300);return{top:o,left:r}}({top:i.top,left:i.left,width:e.outerWidth()},d.$tmCanvasCoords),r="";r+='<div class="timematrix-popover" style="top: '+l.top+"px; left: "+l.left+'px;">',r+='<span class="timematrix-popover-close" title="'+t.closeWindow+'">&times;</span>',r+='<header class="timematrix-popover-header">',r+='<h4 title="'+o+'">'+s.helper.truncateString(o,75)+"</h4>",r+="</header>",r+='<section class="timematrix-popover-body">',r+='<div class="timematrix-popover-imageloader"></div>',r+='<a href="'+a+'"><img src="'+n+'" /></a>',r+="</section>",r+='<footer class="timematrix-popover-footer">',r+='<a href="'+a+'" title="'+o+'">'+t.goToWork+"</a>",r+="</footer>",r+="</div>",d.$tmCanvas.append(r)}function t(e,t){return c&&(console.log("viewer.timematrix _renderSliderBubble: time - "+e),console.log("viewer.timematrix _renderSliderBubble: val - "+t)),'<div class="timematrix-slider-bubble-'+e+'">'+t+"</div>"}return s.timematrix={init:function(e){c&&(console.log("##############################"),console.log("viewer.timematrix.init"),console.log("##############################"),console.log("viewer.timematrix.init: config - "),console.log(e)),$.extend(!0,d,e),d.$tmCanvasCoords={top:d.$tmCanvasPos.top,left:0,right:d.$tmCanvasPos.left+d.$tmCanvas.outerWidth()},$("#slider-range").slider({range:!0,min:parseInt(d.startDate),max:parseInt(d.endDate),values:[parseInt(d.startDate),parseInt(d.endDate)],slide:function(e,t){d.rangeInput1.val(t.values[0]),$(".timematrix-slider-bubble-startDate").html(t.values[0]),d.startDate=t.values[0],d.rangeInput1.val(t.values[1]),$(".timematrix-slider-bubble-endDate").html(t.values[1]),d.endDate=t.values[1]}}),$("#slider-range .ui-slider-range").next().append(t("startDate",d.startDate)),$("#slider-range .ui-slider-range").next().next().append(t("endDate",d.endDate)),$(".ui-slider-handle").on("mousedown",function(){$(".ui-slider-handle").removeClass("top"),$(this).addClass("top")}),$("#locateTimematrix").on("submit",function(e){e.preventDefault(),$(".timematrix-popover").length&&$(".timematrix-popover").remove();var t=d.contextPath;t+=d.apiQuery,t+=d.startDateQuery,t+=d.startDate,t+=d.endDateQuery,t+=d.endDate,t+=d.countQuery,t+=d.count,s.helper.getRemoteData(t).then(function(e){o=e,d.$tmCanvas.html(function(e){c&&(console.log("viewer.timematrix _renderThumbs: json - "),console.log(e));var o="";o+='<div class="timematrix-box">',o+='<header class="timematrix-header">',""!==d.startDate&&""!==d.endDate&&(o+="<h3>"+d.startDate+" - "+d.endDate+"</h3>");return o+="</header>",o+='<section class="timematrix-body">',$.each(e,function(e,t){o+='<div class="timematrix-thumb" data-title="'+t.title+'" data-mediumimage="'+t.mediumimage+'" data-url="'+t.url+'">',t.thumbnailUrl?o+='<img src="'+t.thumbnailUrl+'" style="visibility: hidden;" />':o+="",o+="</div>"}),o+="</section>",o+='<footer class="timematrix-footer"></footer>',o+="</div>"}(o)),$(".timematrix-thumb").css({height:$(".timematrix-thumb").outerWidth()}),$(".timematrix-thumb img").load(function(){$(this).css({visibility:"visible"})}),$(".timematrix-thumb").on("click",function(){$(".timematrix-popover")&&$(".timematrix-popover").remove(),$(".timematrix-thumb").removeClass("marker"),$(this).addClass("marker"),n($(this),d.lang),$(".timematrix-popover-close").on("click",function(){$(this).parent().remove(),$(".timematrix-thumb").removeClass("marker")}),$(".timematrix-popover-body img").load(function(){$(".timematrix-popover-imageloader").hide()})})}).then(null,function(){d.$tmCanvas.append(s.helper.renderAlert("alert-danger","<strong>Status: </strong>"+error.status+" "+error.statusText,!1)),console.error("ERROR: viewer.timematrix.init - ",error)})}),$("body").on("click",function(e){$(e.target).closest(".timematrix-thumb").length||function(){c&&console.log("---------- _removePopovers() ----------");$(".timematrix-popover").remove(),$(".timematrix-thumb").removeClass("marker")}()})}},s}((viewerJS=function(e){"use strict";var t=null,o=null,n={thumbs:".stacked-thumbnail",thumbsBefore:".stacked-thumbnail-before",thumbsAfter:".stacked-thumbnail-after"};return e.stackedThumbnails={init:function(e){$.extend(!0,n,e),$(n.thumbs).hide(),$(n.thumbs).siblings().hide(),$(n.thumbs).each(function(){t=$(this).outerWidth(),o=$(this).outerHeight(),$(this).css({"margin-left":"-"+t/2+"px"}),$(this).siblings().css({width:t,height:o,"margin-left":"-"+t/2+"px"}),$(this).show(),$(this).siblings(n.thumbsBefore).fadeIn("slow",function(){$(this).siblings(n.thumbsAfter).fadeIn()})})}},e}((viewerJS=function(e){"use strict";var r=null,s=null,c=null;return e.simpleLightBox={init:function(){$(".lightbox-image").on("click",function(e){e.preventDefault();var t,o,n,a,i,l=$(this);s=s=l.attr("data-imgpath"),c=c=l.attr("data-imgname"),o="",o='<div class="lightbox-overlay">',o+='<div class="lightbox-modal-box">',o+='<div class="lightbox-close">',o+='<span class="lightbox-close-btn" title="Fenster schlie&szlig;en">&times;</span>',o+="</div>",r=o+='<img src="'+s+(t=c)+'" alt="'+t+'" /></div></div>',$("body").append(r),n=$(".lightbox-modal-box"),a=n.outerWidth(),i=n.outerHeight(),n.css({"margin-top":"-"+i/2+"px","margin-left":"-"+a/2+"px"}),$(".lightbox-overlay").fadeIn(),$(".lightbox-close-btn").on("click",function(){$(".lightbox-overlay").remove()})})}},e}((viewerJS=function(t){"use strict";var o="",n="",a="",i="",l="",r="",s={select:"#sortSelect"};return t.searchSortingDropdown={init:function(e){if($.extend(!0,s,e),!t.localStoragePossible)return!1;o=localStorage.dataSortField,a=location.href,""===o&&"undefinded"===o||$(s.select).children("option").each(function(){n=$(this).attr("data-sortField"),l=$(this).val(),n===o&&l===a&&$(this).attr("selected","selected")}),$(s.select).on("change",function(){if(i=$(this).val(),r=$(this).children("option:selected").attr("data-sortField"),""!==i){if("undefined"==typeof Storage)return console.info("Local Storage is not defined. Current sorting state could not be saved."),!1;localStorage.dataSortField=r,window.location.href=i}})}},t}((viewerJS=function(r){"use strict";var u=!1,s=null,g={contextPath:"",restApiPath:"/rest/search/hit/",hitsPerCall:20,resetSearchSelector:"#resetCurrentSearch",searchInputSelector:"#currentSearchInput",searchTriggerSelector:"#slCurrentSearchTrigger",saveSearchModalSelector:"#saveSearchModal",saveSearchInputSelector:"#saveSearchInput",excelExportSelector:".excel-export-trigger",excelExportLoaderSelector:".excel-export-loader",hitContentLoaderSelector:".search-list__loader",hitContentSelector:".search-list__hit-content",msg:{getMoreChildren:"Mehr Treffer laden"}};function c(e,t){return u&&(console.log("---------- _getApiUrl() ----------"),console.log("_getApiUrl: id = ",e)),g.contextPath+g.restApiPath+e+"/"+t+"/"}function d(e,o){u&&(console.log("---------- _renderChildHits() ----------"),console.log("_renderChildHits: data = ",e),console.log("_renderChildHits: $this = ",o));var n=null;o.next().empty(),$.each(e.children,function(e,t){(n=$('<div class="search-list__hit-content-set" />')).append(function(e){u&&(console.log("---------- _renderHitSetTitle() ----------"),console.log("_renderHitSetTitle: data = ",e));var t=null,o=null,n=null;t=$('<div class="search-list__struct-title" />'),o=$("<h5 />"),n="TEI"===e.labelShort?$("<span />").text(e.labelShort):$("<a />").attr("href",g.contextPath+"/"+e.url).text(e.labelShort);return o.append(n),t.append(o),t}(t.browseElement)),n.append(function(e,t){u&&(console.log("---------- _renderMetdataInfo() ----------"),console.log("_renderMetdataInfo: data = ",e),console.log("_renderMetdataInfo: url = ",t));var o=null,n=null,a=null,i=null,l=null,r=null,s=null,c=null,d=null;if(!$.isEmptyObject(e))return o=$('<div class="search-list__metadata-info" />'),n=$("<table />"),a=$("<tbody />"),e.forEach(function(e){l=$("<td />"),s=$("<i />").attr("aria-hidden","true").addClass("fa fa-bookmark-o"),c=$("<span />").html(e.one+":"),l.append(s).append(c),r=$("<td />"),d=$("<a />").attr("href",g.contextPath+"/"+t).html(e.two),r.append(d),(i=$("<tr />")).append(l).append(r),a.append(i)}),n.append(a),o.append(n),o}(t.foundMetadata,t.url)),t.hasChildren&&$.each(t.children,function(e,t){n.append(function(e,t,o){u&&(console.log("---------- _renderSubChildHits() ----------"),console.log("_renderSubChildHits: data = ",e),console.log("_renderSubChildHits: type = ",t),console.log("_renderSubChildHits: title = ",o));var n,a=null,i=null,l=null,r=null,s=null;n=""===o||null===o?"":o;switch(a=$('<div class="search-list__struct-child-hits" />'),i=$('<dl class="dl-horizontal" />'),l=$("<dt />"),t){case"PAGE":l.append('<i class="fa fa-file-text" title="'+n+'" aria-hidden="true"></i>');break;case"PERSON":l.append('<i class="fa fa-user" title="'+n+'" aria-hidden="true"></i>');break;case"CORPORATION":l.append('<i class="fa fa-university" title="'+n+'" aria-hidden="true"></i>');break;case"LOCATION":l.append('<i class="fa fa-location-arrow" title="'+n+'" aria-hidden="true"></i>');break;case"ADDRESS":l.append('<i class="fa fa-envelope" title="'+n+'" aria-hidden="true"></i>');break;case"SUBJECT":l.append('<i class="fa fa-question-circle-o" title="'+n+'" aria-hidden="true"></i>');break;case"PUBLISHER":l.append('<i class="fa fa-copyright" title="'+n+'" aria-hidden="true"></i>');break;case"COMMENT":l.append('<i class="fa fa-comment" title="'+n+'" aria-hidden="true"></i>');break;case"EVENT":l.append('<i class="fa fa-calendar" title="'+n+'" aria-hidden="true"></i>');break;case"ACCESSDENIED":l.append('<i class="fa fa-lock" title="'+n+'" aria-hidden="true"></i>')}switch(r=$("<dd />"),s=$("<a />").attr("href",g.contextPath+"/"+e.url),t){case"PAGE":case"ACCESSDENIED":s.append(e.fulltextForHtml);break;default:s.append(e.labelShort)}r.append(s),i.append(l).append(r),null!==t&&a.append(i);return a}(t.browseElement,t.type,t.translatedType))}),o.next().append(n)})}return r.searchList={init:function(e){switch(u&&(console.log("##############################"),console.log("viewer.searchList.init"),console.log("##############################"),console.log("viewer.searchList.init: config = ",e)),$.extend(!0,g,e),$('[data-toggle="tooltip"]').tooltip(),$(g.saveSearchModalSelector).on("shown.bs.modal",function(){$(g.saveSearchInputSelector).focus()}),$(g.resetSearchSelector).on("click",function(){$(g.searchInputSelector).val(""),location.href=g.contextPath+"/search/"}),$(g.excelExportSelector).on("click",function(){var t=$(this),o=$(g.excelExportLoaderSelector);t.hide(),o.show();var e=g.contextPath+"/rest/download/search/waitFor/";Q($.ajax({url:decodeURI(e),type:"GET",dataType:"text",async:!0})).then(function(e){u&&console.log("Download started"),o.hide(),t.show()}).catch(function(e){u&&console.log("Error downloading excel sheet: ",e.responseText),o.hide(),t.show()})}),null==localStorage.getItem("searchListStyle")&&localStorage.setItem("searchListStyle","default"),localStorage.getItem("searchListStyle")){case"default":$(".search-list__views button").removeClass("active"),$('[data-view="search-list-default"]').addClass("active"),$(".search-list__hits").removeClass("grid").removeClass("list").fadeIn("fast"),$('[data-toggle="hit-content"]').show();break;case"grid":$(".search-list__views button").removeClass("active"),$('[data-view="search-list-grid"]').addClass("active"),$(".search-list__hits").removeClass("list").addClass("grid"),$('[data-toggle="hit-content"]').hide(),$(".search-list__hit-thumbnail img").each(function(){var e=$(this).attr("src");$(this).parents(".search-list__hit-thumbnail").css("background-image",'url("'+e+'")')}),$(".search-list__hits").fadeIn("fast");break;case"list":$(".search-list__views button").removeClass("active"),$('[data-view="search-list-list"]').addClass("active"),$(".search-list__hits").removeClass("grid").addClass("list").fadeIn("fast"),$('[data-toggle="hit-content"]').hide()}$('[data-view="search-list-default"]').on("click",function(){$(".search-list__views button").removeClass("active"),$(this).addClass("active"),$('[data-toggle="hit-content"]').show(),$(".search-list__hits").hide().removeClass("grid").removeClass("list"),localStorage.setItem("searchListStyle","default"),$(".search-list__hit-thumbnail").css("background-image","none"),$(".search-list__hits").fadeIn("fast")}),$('[data-view="search-list-grid"]').on("click",function(){$(".search-list__views button").removeClass("active"),$(this).addClass("active"),$('[data-toggle="hit-content"]').hide(),$(".search-list__hits").hide().removeClass("list").addClass("grid"),localStorage.setItem("searchListStyle","grid"),$(".search-list__hit-thumbnail img").each(function(){var e=$(this).attr("src");$(this).parents(".search-list__hit-thumbnail").css("background-image",'url("'+e+'")')}),$(".search-list__hits").fadeIn("fast")}),$('[data-view="search-list-list"]').on("click",function(){$(".search-list__views button").removeClass("active"),$(this).addClass("active"),$('[data-toggle="hit-content"]').hide(),$(".search-list__hits").hide().removeClass("grid").addClass("list"),localStorage.setItem("searchListStyle","list"),$(".search-list__hits").fadeIn("fast")}),$('[data-toggle="hit-content"]').each(function(){var t=$(this),o=$(this).attr("data-iddoc"),e=c(o,g.hitsPerCall);u&&console.log("Current API Call URL: ",e),s=r.helper.getRemoteData(e),t.find(g.hitContentLoaderSelector).css("display","inline-block"),s.then(function(e){e.hitsDisplayed<g.hitsPerCall?(d(e,t),t.toggleClass("in").find(g.hitContentLoaderSelector).hide(),t.next().show(),t.off().on("click",function(){$(this).toggleClass("in").next().slideToggle()})):(t.find(g.hitContentLoaderSelector).hide(),t.off().on("click",function(){d(e,t),function o(e,n,a){u&&(console.log("---------- _renderGetMoreChildren() ----------"),console.log("_renderGetMoreChildren: data = ",e),console.log("_renderGetMoreChildren: iddoc = ",n),console.log("_renderGetMoreChildren: $this = ",a));var t=c(n,g.hitsPerCall+e.hitsDisplayed);var i=$("<div />");var l=$('<button type="button" />');{if(!e.hasMoreChildren)return a.next().find(g.hitContentMoreSelector).empty().hide(),console.info("_renderGetMoreChildren: No more child hits available"),!1;i.addClass("search-list__hit-content-more"),l.addClass("btn-clean"),l.attr("data-api",t),l.attr("data-iddoc",n),l.append(g.msg.getMoreChildren),i.append(l),a.next().append(i),l.off().on("click",function(e){var t=$(this).attr("data-api");a.parent().offset().top;(s=r.helper.getRemoteData(t)).then(function(e){d(e,a),o(e,n,a)}).then(null,function(){a.next().append(r.helper.renderAlert("alert-danger","<strong>Status: </strong>"+error.status+" "+error.statusText,!1)),console.error("ERROR: _renderGetMoreChildren - ",error)})})}}(e,o,t),$(this).toggleClass("in").next().slideToggle()}))}).then(null,function(){t.next().append(r.helper.renderAlert("alert-danger","<strong>Status: </strong>"+error.status+" "+error.statusText,!1)),console.error("ERROR: viewer.searchList.init - ",error)})})}},r}((viewerJS=function(t){"use strict";var o=!1,n={},a={loaderSelector:".search-advanced__loader",inputSelector:".value-text",resetSelector:".reset"};function i(){o&&console.log("---------- _setAdvSearchValues() ----------"),$(a.inputSelector).off().on("keyup",function(){var e=$(this).attr("id"),t=$(this).val(),o=JSON.parse(localStorage.getItem("advSearchValues"));if(o.hasOwnProperty(t))return!1;o[e]=t,localStorage.setItem("advSearchValues",JSON.stringify(o))})}function l(){o&&console.log("---------- _resetValue() ----------"),$(a.resetSelector).off().on("click",function(){var e=$(this).parents(".input-group").find("input").attr("id"),t=JSON.parse(localStorage.getItem("advSearchValues"));t.hasOwnProperty(e)&&delete t[e],localStorage.setItem("advSearchValues",JSON.stringify(t)),$(this).parents(".input-group").find("input").val("")})}return t.searchAdvanced={init:function(e){if(o&&(console.log("##############################"),console.log("viewer.searchAdvanced.init"),console.log("##############################"),console.log("viewer.searchAdvanced.init: config = ",e)),$.extend(!0,a,e),$('[data-toggle="tooltip"]').tooltip(),!t.localStoragePossible)return!1;localStorage.setItem("advSearchValues",JSON.stringify(n)),i(),l(),jsf.ajax.addOnEvent(function(e){switch(e.status){case"begin":$(a.loaderSelector).show();break;case"success":$('[data-toggle="tooltip"]').tooltip(),i(),function(){o&&console.log("---------- _getAdvSearchValues() ----------");var e=JSON.parse(localStorage.getItem("advSearchValues"));$.each(e,function(e,t){$("#"+e).val(t)})}(),l(),$("select").each(function(){"disabled"===$(this).attr("disabled")?$(this).parent().addClass("disabled"):$(this).parent().removeClass("disabled")}),$(a.loaderSelector).hide()}})}},t}((viewerJS=function(o){"use strict";var n={themePath:"",imagePath:"",imageDataFile:"",galleryObject:null,maxColumnCount:null,maxImagesPerColumn:null,fixedHeight:!1,maxHeight:"",caption:!0,overlayColor:"",lang:{},lightbox:{active:!0,caption:!0}},a=null,i=null,l=null,r=null,s=null,t=null;return o.responsiveColumnGallery={init:function(e){$.extend(!0,n,e),t=n.themePath+n.imageDataFile,o.helper.getRemoteData(t).then(function(e){if(a=e,s=o.responsiveColumnGallery.checkForSmallViewport(),4<n.maxColumnCount)return n.galleryObject.append(o.helper.renderAlert("alert-danger","Die maximale Spaltenanzahl für die Galerie beträgt 4!",!0)),!1;for(var t=0;t<n.maxColumnCount;t++)n.galleryObject.append(o.responsiveColumnGallery.renderColumns(n.maxColumnCount));for(;a.length;)$.each($(".rcg-col"),function(){$(this).append(o.responsiveColumnGallery.renderImages(a.splice(0,n.maxImagesPerColumn)))});n.fixedHeight&&!s&&$.each($(".rcg-image-body"),function(){o.responsiveColumnGallery.fixedHeight($(this))}),n.lightbox.active&&$(".lightbox-toggle").on("click",function(e){e.preventDefault(),i=$(this).parent().children("img"),l=o.responsiveColumnGallery.prepareLightbox(i),r=o.responsiveColumnGallery.renderLightbox(l),$("body").append(r),$(".rcg-lightbox-body").hide(),$(".rcg-lightbox-overlay").fadeIn("slow"),$(".rcg-lightbox-image img").load(function(){o.responsiveColumnGallery.centerLightbox($(".rcg-lightbox-body")),$(".rcg-lightbox-body").show()}),$(".rcg-lightbox-close").on("click",function(){$(".rcg-lightbox-overlay").remove()}),$(document).keypress(function(e){27===e.keyCode&&$(".rcg-lightbox-overlay").remove()}),$(".rcg-lightbox-image img").on("click",function(){$(".rcg-lightbox-overlay").remove()})})}).then(null,function(e){n.galleryObject.append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.responsiveColumnGallery.init - ",e)})},renderColumns:function(e){var t="";return t+='<div class="rcg-col col-'+e+'"></div>'},renderImages:function(e){var o="";return $.each(e,function(e,t){$.each(t,function(e,t){o+='<div class="rcg-image-container">',o+='<div class="rcg-image-body">',o+='<a href="'+t.url+'">',o+='<div class="rcg-image-overlay" style="background-color:'+n.overlayColor+'"></div>',o+="</a>",o+='<div class="rcg-image-title">',o+="<h4>"+t.title+"</h4>",o+="</div>",o+='<img src="'+n.themePath+n.imagePath+t.name+'" alt="'+t.alt+'" />',n.lightbox.active&&(o+='<div class="lightbox-toggle" title="'+n.lang.showLightbox+'">',o+='<i class="fa fa-arrows-alt" aria-hidden="true"></i>',o+="</div>"),o+="</div>",n.caption&&(o+='<div class="rcg-image-footer">',o+="<p>"+t.caption+'<a href="'+t.url+'" title="'+t.title+'">',o+=n.lang.goToWork+' <i class="fa fa-picture-o" aria-hidden="true"></i></a></p>',o+="</div>"),o+="</div>"})}),o},fixedHeight:function(e){e.children("img").css({height:n.maxHeight})},checkForSmallViewport:function(){return $(window).outerWidth()<=375},prepareLightbox:function(e){var t={};return t.src=e.attr("src"),t.caption=e.attr("alt"),t},renderLightbox:function(e){var t="";return t+='<div class="rcg-lightbox-overlay">',t+='<div class="rcg-lightbox-body">',t+='<div class="rcg-lightbox-close" title="'+n.lang.close+'"><i class="fa fa-times" aria-hidden="true"></i></div>',t+='<div class="rcg-lightbox-image">',t+='<img src="'+e.src+'" alt="'+e.alt+'" />',t+="</div>",n.lightbox.caption&&(t+='<div class="rcg-lightbox-caption">',t+="<p>"+e.caption+"</p>",t+="</div>"),t+="</div>",t+="</div>"},centerLightbox:function(e){var t=e.outerWidth(),o=e.outerHeight();e.css({"margin-top":"-"+o/2+"px","margin-left":"-"+t/2+"px"})}},o}((viewerJS=function(e){"use strict";var o=null,n=null;return e.pageScroll={init:function(e,t){o=$(e),n=t,$(window).on("scroll",function(){200<window.pageYOffset?o.fadeIn():o.hide()}),o.on("click",function(){var e;e=n,$("html,body").animate({scrollTop:$(e).offset().top},1e3)})}},e}((viewerJS=function(e){"use strict";var r=!1,n=null,a="",i=(n="",null),l="",s=null,c=null,d=null,u={id:0,path:null,lang:{},elemWrapper:null};return e.normdata={init:function(e){r&&(console.log("##############################"),console.log("viewer.normdata.init"),console.log("##############################"),console.log("viewer.normdata.init: config = ",e)),$.extend(!0,u,e),$(".closeAllPopovers").hide(),$(".normdataLink").on("click",function(){console.log("Click on normdata"),(s=$(this)).off("focus"),function e(t,o){r&&(console.log("---------- _renderPopoverAction() ----------"),console.log("_renderPopoverAction: $Obj = ",t),console.log("_renderPopoverAction: id = ",o));c=t.find(".fa-list-ul");d=t.find(".normdata-preloader");a=t.attr("data-remotecontent");n=function(e,t,o){r&&(console.log("---------- _getRemoteData() ----------"),console.log("_getRemoteData: url = ",e),console.log("_getRemoteData: loader = ",t),console.log("_getRemoteData: icon = ",o));t.show(),o.hide();var n=$.ajax({url:decodeURI(e),type:"POST",dataType:"JSON",async:!1,success:function(){t.hide(),o.show()}}).responseText;return jQuery.parseJSON(n)}(a,d,c);i=t.offset();l=function(e,t){r&&(console.log("---------- _buildPopover() ----------"),console.log("_buildPopover: data = ",e),console.log("_buildPopover: id = ",t));var n="";return n+='<div id="normdataPopover-'+t+'" class="normdata-popover">',n+='<div class="normdata-popover-title">',n+="<h4>"+u.lang.popoverTitle+"</h4>",n+='<i class="normdata-popover-close fa fa-times" title="'+u.lang.popoverClose+'" aria-hidden="true"></i>',n+="</div>",n+='<div class="normdata-popover-content">',n+='<dl class="dl-horizontal">',$.each(e,function(e,t){$.each(t,function(o,e){n+='<dt title="'+o+'">'+o+"</dt>",n+="<dd>",$.each(e,function(e,t){t.text&&("URI"===o?(n+='<a href="'+t.text+'" target="_blank">',n+=t.text,n+="</a>"):n+=t.text),t.url&&(n+='<button type="button" class="normdataDetailLink" data-remotecontent="',n+=u.path,n+="/api?action=normdata&amp;url=",n+=t.url,n+='" title="'+u.lang.showNormdata+'">',n+='<i class="fa fa-list-ul" aria-hidden="true"></i>',n+='<div class="normdata-preloader"></div>',n+="</button>"),n+="<br />"}),n+="</dd>"})}),n+="</dl>",n+="</div>",n+="</div>"}(n,o);r&&(console.log("_renderPopoverAction: _dataURL = ",a),console.log("_renderPopoverAction: _data = ",n),console.log("_renderPopoverAction: _linkPos = ",i));$("body").append(l);!function(e,t,o){r&&(console.log("---------- _calculatePopoverPosition() ----------"),console.log("_calculatePopoverPosition: id = ",e),console.log("_calculatePopoverPosition: pos = ",t),console.log("_calculatePopoverPosition: $Obj = ",o));var n=$("body").outerWidth(),a=$("#normdataPopover-"+e).outerWidth(),i=t.left+a;r&&(console.log("_calculatePopoverPosition: _bodyWidth = ",n),console.log("_calculatePopoverPosition: _popoverWidth = ",a),console.log("_calculatePopoverPosition: _popoverLeft = ",t.left),console.log("_calculatePopoverPosition: _popoverRight = ",i));if(n<i){var l=i-n;r&&console.log("_calculatePopoverPosition: _diff = ",l),$(document).find("#normdataPopover-"+e).css({top:t.top+o.outerHeight()+5,left:t.left-l})}else $(document).find("#normdataPopover-"+e).css({top:t.top+o.outerHeight()+5,left:t.left})}(o,i,t);$(document).find("#normdataPopover-"+o).hide().fadeIn("fast",function(){t.attr("disabled","disabled").addClass("disabled"),t.tooltip("hide"),$(".normdataDetailLink").off("click").on("click",function(){s=$(this),e(s,u.id)})}).draggable();!function(e){r&&(console.log("---------- _closeNormdataPopover() ----------"),console.log("_closeNormdataPopover: $Obj = ",e));$(document).find(".normdata-popover-close").on("click",function(){$(this).parent().parent().remove(),e.removeAttr("disabled").removeClass("disabled"),$(".normdata-popover").length<1&&$(".closeAllPopovers").hide()})}(t);u.id++;!function(e){r&&(console.log("---------- _closeAllNormdataPopovers() ----------"),console.log("_closeAllNormdataPopovers: $Obj = ",e));var t=e.parent().find("i.closeAllPopovers");0<$(".normdata-popover").length?(t.show(),t.on("click",function(){$(".normdata-popover").each(function(){$(this).remove()}),$(".closeAllPopovers").each(function(){$(this).hide()}),$(".normdataLink").removeAttr("disabled").removeClass("disabled")})):t.hide()}(t)}(s,u.id)})}},e}((viewerJS=function(e){"use strict";var s=!1,t={path:null,lang:{}};function c(e){return s&&(console.log("viewer.nerFulltext _getRemoteData: target - "),console.log(e)),$(".ner-detail-loader",e).css({display:"inline-block"}),$.ajax({url:decodeURI($(e).attr("data-remotecontent")),type:"POST",dataType:"JSON",async:!1,complete:function(){$(".ner-detail-loader").hide()}}).responseText}return e.nerFulltext={init:function(e){s&&(console.log("##############################"),console.log("viewer.nerFulltext.init"),console.log("##############################"),console.log("viewer.nerFulltext.init: config - "),console.log(e)),$.extend(!0,t,e),function(e){s&&console.log("viewer.nerFulltext _initNerPopover: path - "+e);var t,o,n,a,i,l,r;$(".ner-trigger").on("click",function(){$("body").find(".ner-popover-pointer").hide(),$("body").find(".ner-popover").remove(),t=c($(this)),o=$(this).position(),a={top:o.top,left:o.left,width:$(this).outerWidth()},i=$("#view_fulltext_wrapp"),l=i.position(),r={top:l.top,left:0,right:l.left+i.outerWidth()},n=$(this).attr("title"),i.append(function(e,t,o,i){s&&(console.log("viewer.nerFulltext _renderNerPopover: data - "),console.log(e),console.log("viewer.nerFulltext _renderNerPopover: position - "),console.log(t),console.log("viewer.nerFulltext _renderNerPopover: title - "+o),console.log("viewer.nerFulltext _renderNerPopover: path - "+i));var n=t.top,a=t.left,l="";return l+='<div class="ner-popover" style="top:'+n+"px; left:"+a+'px">',l+='<div class="ner-popover-close" title="Fenster schlie&szlig;en">&times;</div>',l+='<div class="ner-popover-header"><h4>'+o+"</h4></div>",l+='<div class="ner-popover-body">',l+='<dl class="dl-horizontal">',$.each($.parseJSON(e),function(e,t){$.each(t,function(n,e){l+='<dt title="'+n+'">'+n+":</dt>";var a="";$.each(e,function(e,t){var o="";switch(n){case"Beruf":case"Verwandte Begriffe":o="fa-briefcase";break;case"Sohn":case"Vater":o="fa-user";break;case"Geburtsort":case"Sterbeort":o="fa-map-marker"}t.url?(a+="<span ",a+='class="ner-detail-trigger" ',a+='title="'+t.text+'" ',a+='tabindex="-1"',a+='data-remotecontent="'+i+"/api?action=normdata&url="+t.url+'">',a+='<i class="fa '+o+'" aria-hidden="true"></i>&nbsp;',a+=t.text,a+='<span class="ner-detail-loader"></span>',a+="</span>"):a+="URI"===n?'<a href="'+t.text+'" target="_blank">'+t.text+"</a>":t.text,a+="<br />"}),l+="<dd>"+a+"</dd>",l+='<div class="ner-popover-detail"></div>'})}),l+="</dl>",l+="</div>",l+="</div>"}(t,function(e,t){s&&(console.log("viewer.nerFulltext _calculateNerPopoverPosition: triggerCoords - "),console.log(e),console.log("viewer.nerFulltext _calculateNerPopoverPosition: textBoxCoords - "),console.log(t));var o,n=e.left-(150-e.width/2),a=n+300,i=t.left,l=t.right,r=n;o=e.top+27,n<=i&&(r=i);l<=a&&(r=t.right-300);return{top:o,left:r}}(a,r),n,e)),$(".ner-popover")&&($(this).find(".ner-popover-pointer").show(),function(){s&&console.log("viewer.nerFulltext _removeNerPopover");$(".ner-popover-close").on("click",function(){$("body").find(".ner-popover-pointer").hide(),$(this).parent().remove()})}(),$(".ner-detail-trigger").on("click",function(){t=c($(this)),n=$(this).attr("title"),$(this).parent().next(".ner-popover-detail").html(function(e,t){s&&(console.log("viewer.nerFulltext _renderNerPopoverDetail: data - "),console.log(e),console.log("viewer.nerFulltext _renderNerPopoverDetail: title - "+t));var a="";return a+='<div class="ner-popover-detail">',a+='<div class="ner-popover-detail-header"><h4>'+t+"</h4></div>",a+='<div class="ner-popover-detail-body">',a+='<dl class="dl-horizontal">',$.each($.parseJSON(e),function(e,t){$.each(t,function(o,e){a+='<dt title="'+o+'">'+o+":</dt>";var n="";$.each(e,function(e,t){n+="URI"===o?'<a href="'+t.text+'" target="_blank">'+t.text+"</a>":t.text,n+="<br />"}),a+="<dd>"+n+"</dd>",a+='<div class="ner-popover-detail"></div>'})}),a+="</dl>",a+="</div>",a+="</div>"}(t,n))}))})}(t.path)}},e}((viewerJS=function(o){"use strict";var n=!1,a=null,i="",l="",r=0,s={},c=0,d=0,u=0,g=0,p=0,f="",h="",m={currentPage:"",baseUrl:"",apiUrl:"/rest/ner/tags/",workId:"",overviewTrigger:"",overviewContent:"",sectionTrigger:"",sectionContent:"",facettingTrigger:"",setTagRange:"",slider:"",sliderScale:"",sectionTags:"",currentTags:"",sliderHandle:"",sliderSectionStripe:"",recurrenceNumber:0,recurrenceSectionNumber:0,sidebarRight:!1,loader:"",msg:{noJSON:"Es konnten keine Daten abgerufen werden.",emptyTag:"Keine Tags vorhanden",page:"Seite",tags:"Tags"}};function t(o){n&&(console.log("---------- _renderOverview() ----------"),console.log("_renderOverview: data = ",o)),l="",l+='<ul class="overview-scale">',$.each(o.pages,function(e,t){l+="<li>",l+='<div class="page-number">',1==o.rangeSize?("nerfacetting"===m.currentPage?l+='<a href="'+m.baseUrl+"/image/"+m.workId+"/"+t.pageOrder+'/">':l+='<a href="'+m.baseUrl+"/"+m.currentPage+"/"+m.workId+"/"+t.pageOrder+'/">',l+=t.pageOrder):"nerfacetting"===m.currentPage?void 0!==t.firstPage||void 0!==t.lastPage?(l+='<a href="'+m.baseUrl+"/image/"+m.workId+"/"+t.firstPage+'/">',l+=t.firstPage+"-"+t.lastPage):(l+='<a href="'+m.baseUrl+"/image/"+m.workId+"/"+t.pageOrder+'/">',l+=t.pageOrder):void 0!==t.firstPage||void 0!==t.lastPage?(l+='<a href="'+m.baseUrl+"/"+m.currentPage+"/"+m.workId+"/"+t.firstPage+'/">',l+=t.firstPage+"-"+t.lastPage):(l+='<a href="'+m.baseUrl+"/"+m.currentPage+"/"+m.workId+"/"+t.pageOrder+'/">',l+=t.pageOrder),l+="</a>",l+="</div>",l+='<div class="tag-container">',0===t.tags.length||"undefined"===t.tags.length?l+='<span class="page-tag empty">'+m.msg.emptyTag+"</span>":$.each(t.tags,function(e,t){l+='<span class="page-tag '+t.type+'">'+t.value+"</span>"}),l+="</div>",l+="</li>"}),l+="</ul>",$(m.overviewContent).hide().html(l).find(".tag-container").each(function(){$(this).children(".page-tag").slice(m.recurrenceNumber).remove()}),$(m.overviewContent).show(),$(m.loader).hide(),$(".tag-container").on({mouseover:function(){var e,t,o,n=$(this);t=(e=n).html(),o=e.position(),m.sidebarRight?"nerfacetting"===m.currentPage?$(m.currentTags).html(t).css({display:"block",top:o.top+25+"px"}):$(m.currentTags).addClass("right").html(t).css({display:"block",top:o.top-2+"px",left:"auto",right:"100%"}):"nerfacetting"===m.currentPage?$(m.currentTags).html(t).css({display:"block",top:o.top+25+"px"}):$(m.currentTags).html(t).css({display:"block",top:o.top-2+"px"})},mouseout:function(){$(m.currentTags).hide()}})}function v(){n&&(console.log("---------- _renderSection() ----------"),console.log("_renderSection: _currentNerPageRange = ",f),console.log("_renderSection: _currentNerType = ",h)),i=m.baseUrl+m.apiUrl+m.workId,o.helper.getRemoteData(i).then(function(e){r=function(e){n&&(console.log("---------- _getPageCount() ----------"),console.log("_getPageCount: work - ",e));return e.pages.length}(e),null!==f&&""!==f||(f=localStorage.getItem("currentNerPageRange")),null!==h&&""!==h||(h=localStorage.getItem("currentNerType")),"nerfacetting"===m.currentPage?$("#sliderScale .scale-page.end").html(r):1e3<r?$("#sliderScale .scale-page.end").html("999+"):$("#sliderScale .scale-page.end").html(r),$(m.slider).slider({orientation:"vertical",range:!1,min:1,max:r,value:r,slide:function(e,t){s=$(m.sliderHandle).position(),d=r+1-t.value,$(".page-bubble").show(),function(e){n&&(console.log("---------- _renderPageBubble() ----------"),console.log("_renderPageBubble: page - ",e));var t="";switch(f){case"5":for(g=e-2,p=e+3;g<1;)g++,p++;for(;r<p;)g--,p--;t+='<span class="page-bubble">'+g+"-"+p+"</span>";break;case"10":for(g=e-5,p=e+5;g<1;)g++,p++;for(;r<p;)g--,p--;t+='<span class="page-bubble">'+g+"-"+p+"</span>";break;case"50":for(g=e-25,p=e+25;g<1;)g++,p++;for(;r<p;)g--,p--;t+='<span class="page-bubble">'+g+"-"+p+"</span>";break;case"100":for(g=e-50,p=e+50;g<1;)g++,p++;for(;r<p;)g--,p--;t+='<span class="page-bubble">'+g+"-"+p+"</span>"}$("#sliderVertical .ui-slider-handle").html(t)}(d)},start:function(){s=$(m.sliderHandle).position(),c=s.top},stop:function(e,t){switch(h=localStorage.getItem("currentNerType"),u=$(m.sliderScale).height(),r<f?$(m.sliderSectionStripe).css({top:"0px",height:"600px"}):s.top<100?$(m.sliderSectionStripe).animate({top:"0px",height:"100px"}):100<s.top&&(500<s.top?$(m.sliderSectionStripe).animate({top:u-100+"px",height:"100px"}):c<s.top?$(m.sliderSectionStripe).animate({top:s.top-25+"px",height:"100px"}):$(m.sliderSectionStripe).animate({top:s.top-50+"px",height:"100px"})),f){case"5":for(g=d-2,p=d+3;g<1;)g++,p++;for(;r<p;)g--,p--;i=w(g,p,h);break;case"10":for(g=d-5,p=d+5;g<1;)g++,p++;for(;r<p;)g--,p--;i=w(g,p,h);break;case"50":for(g=d-25,p=d+25;g<1;)g++,p++;for(;r<p;)g--,p--;i=w(g,p,h);break;case"100":for(g=d-50,p=d+50;g<1;)g++,p++;for(;r<p;)g--,p--;i=w(g,p,h)}o.helper.getRemoteData(i).then(function(e){""===(l=b(a=e))?$(m.sectionTags).hide().html(o.helper.renderAlert("alert-warning",m.msg.emptyTag,!1)).show():($(m.sectionTags).hide().html(l).each(function(){$(this).children(".page-tag").slice(m.recurrenceSectionNumber).remove()}),$(m.sectionTags).show()),$(".page-bubble").fadeOut()}).then(null,function(e){$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.nerFacetting.init - ",e)})}}),i=w(0,f,h),o.helper.getRemoteData(i).then(function(e){""===(l=b(a=e))?$(m.sectionTags).hide().html(o.helper.renderAlert("alert-warning",m.msg.emptyTag,!1)).show():($(m.sectionTags).hide().html(l).each(function(){$(this).children(".page-tag").slice(m.recurrenceSectionNumber).remove()}),$(m.sectionTags).show()),$(m.loader).hide()}).then(null,function(e){$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.nerFacetting.init - ",e)})}).then(null,function(e){$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.nerFacetting.init - ",e)})}function b(e){return n&&(console.log("---------- _renderSectionTags() ----------"),console.log("_renderSectionTags: data - ",e)),l="",$.each(e.pages,function(e,t){0===t.tags.length||"undefined"===t.tags.length?l+="":$.each(t.tags,function(e,t){"nerfacetting"===m.currentPage?t.counter<10?l+='<span class="page-tag '+t.type+'" style="font-size: 1.'+t.counter+'rem;">'+t.value+"</span>":l+='<span class="page-tag '+t.type+'" style="font-size: 2rem;">'+t.value+"</span>":t.counter<10?l+='<span class="page-tag '+t.type+'" style="font-size: 1'+t.counter+'px;">'+t.value+"</span>":l+='<span class="page-tag '+t.type+'" style="font-size: 19px;">'+t.value+"</span>"})}),l}function S(){n&&console.log("---------- _resetFacettingIcons() ----------"),$(".facetting-trigger").addClass("active"),$(".reset-filter").hide()}function _(e,t){return m.baseUrl+m.apiUrl+"ranges/"+e+"/"+t+"/"+m.workId+"/"}function w(e,t,o){return m.baseUrl+m.apiUrl+e+"/"+t+"/"+o+"/"+m.workId+"/"}return o.nerFacetting={init:function(e){n&&(console.log("##############################"),console.log("viewer.nerFacetting.init"),console.log("##############################"),console.log("viewer.nerFacetting.init: config - ",e)),$.extend(!0,m,e),o.localStoragePossible?($(m.loader).show(),function(){n&&console.log("---------- _cleanUpLocalStorage() ----------");localStorage.removeItem("currentNerPageRange"),localStorage.removeItem("currentNerType")}(),$(m.setTagRange).find("option").attr("selected",!1),"nerfacetting"===m.currentPage?$(m.setTagRangeOverview).find('option[value="1"]').prop("selected",!0):$(m.setTagRangeOverview).find('option[value="10"]').prop("selected",!0),S(),i="nerfacetting"===m.currentPage?_(1,"-"):_(10,"-"),o.helper.getRemoteData(i).then(function(e){null!==(a=e)||"undefinded"!==a?""===$(m.overviewContent).html()&&t(a):(l=o.helper.renderAlert("alert-danger",m.msg.noJSON+"<br /><br />URL: "+i,!0),$(m.overviewContent).html(l))}).then(null,function(e){$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.nerFacetting.init - ",e)}),$(m.overviewTrigger).on("click",function(){$(m.loader).show(),$(m.setTagRange).find("option").attr("selected",!1),"nerfacetting"===m.currentPage?($(m.setTagRangeOverview).find('option[value="1"]').prop("selected",!0),localStorage.setItem("currentNerPageRange","1")):($(m.setTagRangeOverview).find('option[value="10"]').prop("selected",!0),localStorage.setItem("currentNerPageRange","10")),f=localStorage.getItem("currentNerPageRange"),localStorage.setItem("currentNerType","-"),h=localStorage.getItem("currentNerType"),S(),$(this).parent().hasClass("active")?console.info("Overview is already active."):(i="nerfacetting"===m.currentPage?_(1,"-"):_(10,"-"),o.helper.getRemoteData(i).then(function(e){t(a=e)}).then(null,function(e){$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.nerFacetting.init - ",e)}))}),$(m.sectionTrigger).on("click",function(){$(m.loader).show(),$(m.setTagRange).find("option").attr("selected",!1),"nerfacetting"===m.currentPage?$(m.setTagRangeSection).find('option[value="5"]').prop("selected",!0):$(m.setTagRangeSection).find('option[value="10"]').prop("selected",!0),S(),"nerfacetting"===m.currentPage?localStorage.setItem("currentNerPageRange",5):localStorage.setItem("currentNerPageRange",10),f=localStorage.getItem("currentNerPageRange"),localStorage.setItem("currentNerType","-"),h=localStorage.getItem("currentNerType"),$(this).parent().hasClass("active")?console.info("Section is already active."):(v(),$(m.sliderSectionStripe).css("top","0px"))}),$(m.setTagRange).on("change",function(){var e=$(this).val();h=localStorage.getItem("currentNerType"),$(m.loader).show(),localStorage.setItem("currentNerPageRange",e),f=localStorage.getItem("currentNerPageRange"),$(this).hasClass("overview")?(null!==h&&""!==h||(h="-"),i=_(e,h),o.helper.getRemoteData(i).then(function(e){null!==(a=e)||"undefinded"!==a?t(a):(l=o.helper.renderAlert("alert-danger",m.msg.noJSON+"<br /><br />URL: "+i,!0),$(m.overviewContent).html(l))}).then(null,function(e){$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.nerFacetting.init - ",e)})):(localStorage.setItem("currentNerPageRange",e),f=localStorage.getItem("currentNerPageRange"),v(),r<f?$(m.sliderSectionStripe).css({top:"0px",height:"600px"}):$(m.sliderSectionStripe).css({top:"0px",height:"100px"}))}),$(m.facettingTrigger).on("click",function(){var e=$(this).attr("data-type");$(m.loader).show(),localStorage.setItem("currentNerType",e),h=localStorage.getItem("currentNerType"),"nerfacetting"===m.currentPage?null!=f&&""!==f||(f=localStorage.setItem("currentNerPageRange",1)):null!=f&&""!==f||(f=localStorage.setItem("currentNerPageRange",10)),f=localStorage.getItem("currentNerPageRange"),$(".facetting-trigger").removeClass("active"),$(this).addClass("active"),$(".reset-filter").show(),"overview"===$(this).parent().parent().parent().attr("id")?(i=_(f,h),o.helper.getRemoteData(i).then(function(e){t(a=e),$(this).parent().hasClass("reset-filter")&&$(this).parent().hide(),"-"===h&&$(".facetting-trigger").addClass("active")}).then(null,function(e){$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Status: </strong>"+e.status+" "+e.statusText,!1)),console.error("ERROR: viewer.nerFacetting.init - ",e)})):(v(),$(this).parent().hasClass("reset-filter")&&$(this).parent().hide(),"-"===h&&$(".facetting-trigger").addClass("active"),$(m.sliderSectionStripe).css("top","0px"))})):$(".facetting-content").empty().append(o.helper.renderAlert("alert-danger","<strong>Deactivated: </strong>Not possible to write in local Storage!",!1))}},o}((viewerJS=function(e){"use strict";var i=!1,t={navigationSelector:"#navigation",subMenuSelector:'[data-toggle="submenu"]',megaMenuSelector:'[data-toggle="megamenu"]',closeMegaMenuSelector:'[data-toggle="close"]'};function o(){i&&console.log("---------- _resetMenus() ----------"),$(".navigation__submenu-trigger").removeClass("active"),$(".navigation__submenu").removeClass("in"),$(".navigation__megamenu-trigger").removeClass("active"),$(".navigation__megamenu-wrapper").removeClass("in")}return e.navigation={init:function(e){i&&(console.log("##############################"),console.log("viewer.navigation.init"),console.log("##############################"),console.log("viewer.navigation.init: config - ",e)),$.extend(!0,t,e),$(t.subMenuSelector).on("click",function(){var e=$(this);$(this).parents(".navigation__submenu").hasClass("in")?($(".level-2, .level-3, .level-4, .level-5").parent().removeClass("active"),$(".level-2, .level-3, .level-4, .level-5").removeClass("in").removeClass("left"),e.parent().addClass("active"),e.next(".navigation__submenu").addClass("in"),function(e){i&&(console.log("---------- _clacSubMenuPosition() ----------"),console.log("_clacSubMenuPosition: menu - ",e));var t=e.offset().left,o=e.outerWidth(),n=$(window).outerWidth(),a=t+o;i&&(console.log("_clacSubMenuPosition: currentOffsetLeft - ",t),console.log("_clacSubMenuPosition: menuWidth - ",o),console.log("_clacSubMenuPosition: windowWidth - ",n),console.log("_clacSubMenuPosition: offsetWidth - ",a));{if(!(n<=a))return;e.addClass("left").css("width",o)}}(e.next(".navigation__submenu"))):(o(),e.parent().addClass("active"),e.next(".navigation__submenu").addClass("in"))}),$(t.megaMenuSelector).on("click",function(){o(),$(this).next(".navigation__megamenu-wrapper").hasClass("in")?($(this).parent().removeClass("active"),$(this).next(".navigation__megamenu-wrapper").removeClass("in")):($(".navigation__megamenu-trigger").removeClass("active"),$(".navigation__megamenu-wrapper").removeClass("in"),$(this).parent().addClass("active"),$(this).next(".navigation__megamenu-wrapper").addClass("in"))}),$(t.closeMegaMenuSelector).on("click",function(){o()}),0<$(".navigation__megamenu-wrapper").length&&o(),$("body").on("click",function(e){"navigation"==e.target.id||$(e.target).closest(t.navigationSelector).length||o()})}},e}((viewerJS=function(e){"use strict";var o=!1,t="",n={root:"",userLoggedIn:!1};return e.mirador={init:function(e){o&&(console.log("##############################"),console.log("viewer.mirador.init"),console.log("##############################"),console.log("viewer.mirador.init: config - ",e)),$.extend(!0,n,e),n.userLoggedIn?(t=sessionStorage.getItem("bookshelfId"),function(e,t){o&&(console.log("---------- _getSessionElementCount() ----------"),console.log("_getSessionElementCount: root - ",e),console.log("_getSessionElementCount: id - ",t));return Q($.ajax({url:e+"/rest/bookshelves/user/mirador/"+t+"/",type:"GET",dataType:"JSON",async:!0}))}(n.root,t).then(function(e){$(function(){Mirador(e)})}).fail(function(e){console.error("ERROR - _getMiradorObjects: ",e.responseText)})):function(e){o&&(console.log("---------- _getMiradorSessionObjects() ----------"),console.log("_getMiradorSessionObjects: root - ",e));return Q($.ajax({url:e+"/rest/bookshelves/session/mirador/",type:"GET",dataType:"JSON",async:!0}))}(n.root).then(function(e){$(function(){Mirador(e)})}).fail(function(e){console.error("ERROR - _getMiradorSessionObjects: ",e.responseText)})}},e}((viewerJS=function(l){"use strict";return l.helper={truncateString:function(e,t){return t<parseInt(e.length)?e.substring(0,t)+"...":e},saveSidebarTocPosition:function(){var t=null,e=localStorage.getItem("currIdDoc"),o=".widget-toc-elem-wrapp",n=null,a="",i="";if(!l.localStoragePossible)return!1;"false"!==e?(0<(n=$('li[data-iddoc="'+e+'"]')).length&&$(o).scrollTop(n.offset().top-$(o).offset().top+$(o).scrollTop()),localStorage.setItem("currIdDoc","false"),$(".widget-toc-elem-link a").on("click",function(){i=$(this).parents("li").attr("data-iddoc"),localStorage.setItem("currIdDoc",i)})):(localStorage.setItem("currIdDoc","false"),$(".widget-toc-elem-expand a").on("click",function(){t=$(o).scrollTop(),localStorage.setItem("sidebarTocScrollPosition",t)}),$(".widget-toc-elem-link a").on("click",function(e){e.preventDefault(),a=$(this).attr("href"),t=$(o).scrollTop(),localStorage.setItem("sidebarTocScrollPosition",t),location.href=a}),$(o).scrollTop(localStorage.getItem("sidebarTocScrollPosition")))},getRemoteData:function(e){return Q($.ajax({url:decodeURI(e),type:"GET",dataType:"JSON",async:!0}))},renderModal:function(e){var t={id:"myModal",label:"myModalLabel",closeId:"closeModal",submitId:"submitModal",string:{title:"Modal title",body:"",closeBtn:"Close",saveBtn:"Save changes"}};$.extend(!0,t,e);var o="";return o+='<div class="modal fade" id="'+t.id+'" tabindex="-1" role="dialog" aria-labelledby="'+t.label+'">',o+='<div class="modal-dialog" role="document">',o+='<div class="modal-content">',o+='<div class="modal-header">',o+='<button type="button" class="close" data-dismiss="modal" aria-label="'+t.string.closeBtn+'">',o+='<span aria-hidden="true">&times;</span>',o+="</button>",o+='<h4 class="modal-title" id="'+t.label+'">'+t.string.title+"</h4>",o+="</div>",o+='<div class="modal-body">'+t.string.body+"</div>",o+='<div class="modal-footer">',o+='<button type="button" id="'+t.closeId+'"  class="btn" data-dismiss="modal">'+t.string.closeBtn+"</button>",o+='<button type="button" id="'+t.submitId+'" class="btn">'+t.string.saveBtn+"</button>",o+="</div></div></div></div>"},renderAlert:function(e,t,o){var n="";return n+='<div role="alert" class="alert '+e+' alert-dismissible fade in">',o&&(n+='<button aria-label="Close" data-dismiss="alert" class="close" type="button"><span aria-hidden="true">×</span></button>'),n+=t,n+="</div>"},detectIEVersion:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(0<e.indexOf("Trident/")){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var n=e.indexOf("Edge/");return 0<n&&parseInt(e.substring(n+5,e.indexOf(".",n)),10)},checkLocalStorage:function(){if("object"==typeof localStorage)try{return localStorage.setItem("testLocalStorage",1),localStorage.removeItem("testLocalStorage"),!0}catch(e){return console.error("Not possible to write in local Storage: ",e),!1}},renderWarningPopover:function(e){var t=$("<div />"),o=$("<p />"),n=$("<button />"),a=$('<i aria-hidden="true" />');return t.addClass("warning-popover"),n.addClass("btn-clean"),n.attr("data-toggle","warning-popover"),a.addClass("fa fa-times"),n.append(a),t.append(n),o.html(e),t.append(o),t},equalHeight:function(e,t){var o=$(e),n=$(t),a=o.outerHeight();n.outerHeight()<a&&n.css({"min-height":a+"px"})},validateReCaptcha:function(e,t){var o=grecaptcha.render(e,{sitekey:t,callback:function(){var e=grecaptcha.getResponse(o);return console.log(e),0!=e}})},getCurrentBrowser:function(){var e=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),t="undefined"!=typeof InstallTrigger,o=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString(),n=!!document.documentMode,a=!n&&!!window.StyleMedia,i=!!window.chrome&&!!window.chrome.webstore;return e?"Opera":t?"Firefox":o?"Safari":n?"IE":a?"Edge":i?"Chrome":void 0}},l.localStoragePossible=l.helper.checkLocalStorage(),l}((viewerJS=function(o){"use strict";var l=!1,a={dataType:null,dataTitle:null,dataId:null,dataPi:null,downloadBtn:null,reCaptchaSiteKey:"",useReCaptcha:!0,path:"",iiifPath:"",apiUrl:"",userEmail:null,workInfo:{},modal:{id:"",label:"",string:{title:"",body:"",closeBtn:"",saveBtn:""}},messages:{downloadInfo:{text:"Informationen zum angeforderten Download",title:"Werk",part:"Teil",fileSize:"Größe"},reCaptchaText:"Um die Generierung von Dokumenten durch Suchmaschinen zu verhindern bestätigen Sie bitte das reCAPTCHA.",rcInvalid:"Die Überprüfung war nicht erfolgreich. Bitte bestätigen Sie die reCAPTCHA Anfrage.",rcValid:"Vielen Dank. Sie können nun ihre ausgewählte Datei generieren lassen.",eMailText:"Um per E-Mail informiert zu werden sobald der Download zur Verfügung steht, können Sie hier optional Ihre E-Mail Adresse hinterlassen",eMailTextLoggedIn:"Sie werden über Ihre registrierte E-Mail Adresse von uns über den Fortschritt des Downloads informiert.",eMail:""}},t=null;return o.downloadModal={init:function(e){l&&(console.log("##############################"),console.log("viewer.downloadModal.init"),console.log("##############################"),console.log("viewer.downloadModal.init: config = ",e)),$.extend(!0,a,e),(t=$("<div />")).addClass("dl-modal__overlay"),$("body").append(t),a.downloadBtn.on("click",function(){$(".dl-modal__overlay").fadeIn("fast"),a.dataType=$(this).attr("data-type"),a.dataTitle=$(this).attr("data-title"),""!==$(this).attr("data-id")?a.dataId=$(this).attr("data-id"):a.dataId="-",a.dataPi=$(this).attr("data-pi"),function(e,t,o){l&&(console.log("---------- _getWorkInfo() ----------"),console.log("_getWorkInfo: pi = ",e),console.log("_getWorkInfo: logid = ",t),console.log("_getWorkInfo: type = ",o));var n="";""!==t||void 0!==t?(n=a.iiifPath+o+"/mets/"+e+"/"+t+"/",l&&(console.log("if"),console.log("_getWorkInfo: restCall = ",n))):(n=a.iiifPath+o+"/mets/"+e+"/-/",l&&(console.log("else"),console.log("_getWorkInfo: restCall = ",n)));return viewerJS.helper.getRemoteData(n)}(a.dataPi,a.dataId,a.dataType).done(function(e){a.workInfo=e,a.modal={id:a.dataPi+"-Modal",label:a.dataPi+"-Label",string:{title:a.dataTitle,body:o.downloadModal.renderModalBody(a.dataType,a.workInfo),closeBtn:a.messages.closeBtn,saveBtn:a.messages.saveBtn}},$(".dl-modal__overlay").fadeOut("fast"),o.downloadModal.initModal(a)})})},initModal:function(e){l&&(console.log("---------- viewer.downloadModal.initModal() ----------"),console.log("viewer.downloadModal.initModal: params = ",e)),$("body").append(o.helper.renderModal(e.modal)),$("#submitModal").attr("disabled","disabled"),$("#"+e.modal.id).modal("show"),$("#"+e.modal.id).on("shown.bs.modal",function(e){if(a.useReCaptcha)var t=grecaptcha.render("reCaptchaWrapper",{sitekey:a.reCaptchaSiteKey,callback:function(){o.downloadModal.validateReCaptcha(grecaptcha.getResponse(t))?($("#modalAlerts").append(o.helper.renderAlert("alert-success",a.messages.rcValid,!0)),$("#submitModal").removeAttr("disabled").on("click",function(){a.userEmail=$("#recallEMail").val(),a.apiUrl=o.downloadModal.buildAPICall(a.path,a.dataType,a.dataPi,a.dataId,a.userEmail),window.location.href=a.apiUrl})):$("#modalAlerts").append(o.helper.renderAlert("alert-danger",a.messages.rcInvalid,!0))}});else $(this).find(".modal-body h4").next("p").hide(),$("#submitModal").removeAttr("disabled").on("click",function(){a.userEmail=$("#recallEMail").val(),a.apiUrl=o.downloadModal.buildAPICall(a.path,a.dataType,a.dataPi,a.dataId,a.userEmail),window.location.href=a.apiUrl})}),$("#"+e.modal.id).on("hidden.bs.modal",function(e){$(this).remove()})},renderModalBody:function(e,t){l&&(console.log("---------- viewer.downloadModal.renderModalBody() ----------"),console.log("viewer.downloadModal.renderModalBody: type = ",e),console.log("viewer.downloadModal.renderModalBody: infos = ",t));var o="";return o+="",o+='<div id="modalAlerts"></div>',"pdf"===e?(o+="<h4>",o+='<i class="fa fa-file-pdf-o" aria-hidden="true"></i> PDF-Download: '):(o+="<h4>",o+='<i class="fa fa-file-text-o" aria-hidden="true"></i> ePub-Download: '),o+="</h4>",o+="<p>"+a.messages.downloadInfo.text+":</p>",o+='<dl class="dl-horizontal">',o+="<dt>"+a.messages.downloadInfo.title+":</dt>",o+="<dd>"+t.title+"</dd>",null!==t.div&&(o+="<dt>"+a.messages.downloadInfo.part+":</dt>",o+="<dd>"+t.div+"</dd>"),t.size&&(o+="<dt>"+a.messages.downloadInfo.fileSize+":</dt>",o+="<dd>~"+t.size+"</dd>",o+="</dl>"),a.useReCaptcha&&(o+="<hr />",o+="<p><strong>reCAPTCHA</strong></p>",o+="<p>"+a.messages.reCaptchaText+":</p>",o+='<div id="reCaptchaWrapper"></div>'),o+="<hr />",o+='<form class="email-form">',o+='<div class="form-group">',o+='<label for="recallEMail">'+a.messages.eMail+"</label>",null!=a.userEmail?(o+='<p class="help-block">'+a.messages.eMailTextLoggedIn+"</p>",o+='<input type="email" class="form-control" id="recallEMail" value="'+a.userEmail+'" disabled="disabled" />'):(o+='<p class="help-block">'+a.messages.eMailText+":</p>",o+='<input type="email" class="form-control" id="recallEMail" />'),o+="</div>",o+="</form>"},validateReCaptcha:function(e){return l&&(console.log("---------- viewer.downloadModal.validateReCaptcha() ----------"),console.log("viewer.downloadModal.validateReCaptcha: response = ",e)),0!=e},buildAPICall:function(e,t,o,n,a){l&&(console.log("---------- viewer.downloadModal.buildAPICall() ----------"),console.log("viewer.downloadModal.buildAPICall: path = ",e),console.log("viewer.downloadModal.buildAPICall: type = ",t),console.log("viewer.downloadModal.buildAPICall: pi = ",o),console.log("viewer.downloadModal.buildAPICall: logid = ",n),console.log("viewer.downloadModal.buildAPICall: email = ",a));var i="";return i+=e+"rest/download",i+=""==t?"/-":"/"+t,i+=""==o?"/-":"/"+o,i+=""==n?"/-":"/"+n,i+=""==a||null==a?"/-/":"/"+a+"/",encodeURI(i)}},o}((viewerJS=function(t){"use strict";var e=null,o=null;return t.download={init:function(){e=$("#agreeLicense"),(o=$("#downloadBtn")).prop("disabled",!0),e.on("click",function(){var e=$(this).prop("checked");t.download.checkboxValidation(e)})},checkboxValidation:function(e){if(!e)return o.prop("disabled",!0),!1;o.prop("disabled",!1)}},t}((viewerJS=function(o){"use strict";var l={path:null,dataSortOrder:null,dataCount:null,dataEncoding:null,feedBox:null,monthNames:["","Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"]};return o.dateSortedFeed={init:function(e){$.extend(!0,l,e);var t=l.path;t+="/api?action=query&q=PI:*&jsonFormat=datecentric&sortField=DATECREATED",t+="&sortOrder=",t+=l.dataSortOrder,t+="&count=",t+=l.dataCount,t+="&encoding=",t+=l.dataEncoding,l.feedBox&&o.helper.getRemoteData(t).then(function(e){var t,i;t=e,i="",$.each(t,function(e,t){var o,n,a;i+="<h4>"+(o=t.date,n=o.split("-"),a=parseInt(n[1]),n[2]+". "+l.monthNames[a]+" "+n[0])+"</h4>",$.each(t,function(e,t){if(t.title)for(var o=0;o<=t.title.length;o++)void 0!==t.title[o]&&(i+='<div class="sorted-feed-title"><a href="',i+=t.url,i+='" title="',i+=t.title[o],i+='">',i+=t.title[o],i+="</a></div>")})}),l.feedBox.append(i)}).then(null,function(){console.error("ERROR: viewer.dateSortedFeed.init - ",error)})},getDataSortOrder:function(){return l.dataSortOrder},setDataSortOrder:function(e){l.dataSortOrder=e},getDataCount:function(){return l.dataCount},setDataCount:function(e){l.dataCount=e},getDataEncoding:function(){return l.dataEncoding},setDataEncoding:function(e){l.dataEncoding=e}},o}((viewerJS=function(o){"use strict";var n=null,a=null,e=null,t=null,i={dataTablePaginator:"",txtField1:"",txtField2:"",totalCount:"",reloadBtn:""};return o.dataTable={init:function(e){$.extend(!0,i,e),o.dataTable.paginator.init(),0<$(".column-filter-wrapper").length&&o.dataTable.filter.init()},paginator:{setupAjax:!1,init:function(){$(i.dataTablePaginator),n=$(i.txtField1),a=$(i.txtField2),e=$(i.totalCount),t=$(i.reloadBtn),n.on("click",function(){$(this).hide(),o.dataTable.paginator.inputFieldHandler()}),e.on("click",function(){n.hide(),o.dataTable.paginator.inputFieldHandler()}),this.setupAjax||(jsf.ajax.addOnEvent(function(e){var t=e.status;if(0<i.dataTablePaginator.length)switch(t){case"begin":null!==n&&null!==a&&(n.off(),a.off());break;case"complete":break;case"success":o.dataTable.paginator.init()}}),this.setupAjax=!0)},inputFieldHandler:function(){a.show().find("input").focus().select(),a.find("input").on("blur",function(){$(this).hide(),n.show(),t.click()}),a.find("input").on("keypress",function(e){13==e.keyCode&&t.click()})}},filter:{setupAjax:!1,init:function(){$("#adminAllUserForm").on("submit",function(e){e.preventDefault(),$(".column-filter-wrapper").find(".btn-filter").click()}),this.setupAjax||(jsf.ajax.addOnEvent(function(e){var t=e.status;if(0<i.dataTablePaginator.length)switch(t){case"begin":case"complete":break;case"success":o.dataTable.filter.init()}}),this.setupAjax=!0)}}},o}((viewerJS=function(e){"use strict";var t,o,n=!1,a={yearList:[],startValue:0,endValue:0,currentMinRangeValue:"",currentMaxRangeValue:""};return e.chronoSlider={init:function(e){n&&(console.log("##############################"),console.log("viewer.chronoSlider.init"),console.log("##############################"),console.log("viewer.chronoSlider.init: config - ",e)),$.extend(!0,a,e),$("#chronoSlider").slider({range:!0,min:0,max:a.yearList.length-1,values:[a.yearList.indexOf(a.currentMinRangeValue),a.yearList.indexOf(a.currentMaxRangeValue)],slide:function(e,t){$(".chronology-slider-start").html(a.yearList[t.values[0]]),$(".chronology-slider-end").html(a.yearList[t.values[1]]),t.values[0]==t.values[1]?($("#chronoSlider .ui-slider-handle:first").css("margin-right","-10px"),$("#chronoSlider .ui-slider-handle:last").css("margin-left","0")):$("#chronoSlider .ui-slider-handle:last").css("margin-left","-10px")},stop:function(e,t){var o=parseInt($(".chronology-slider-start").text()),n=parseInt($(".chronology-slider-end").text());$(".chronology-slider-action-loader").addClass("active"),$('[id*="chronologySliderInput"]').val("["+o+" TO "+n+"]"),$('[id*="chronologySliderForm"] input[type="submit"]').click()}}),t=parseInt($("#chronoSlider .ui-slider-handle:first").css("left")),o=parseInt($("#chronoSlider .ui-slider-handle:last").css("left")),$("#chronoSlider .ui-slider-handle:last").css("margin-left","-10px"),t==o&&$("#chronoSlider .ui-slider-handle:last").css("margin-left","0"),(a.startValue>a.yearList[0]||a.endValue<a.yearList[a.yearList.length-1])&&($(".chronology-slider-action-reset").addClass("active"),$('[data-reset="chrono-slider"]').on("click",function(){!function(e){n&&(console.log("---------- _resetChronoSlider() ----------"),console.log("_resetChronoSlider: years = ",e));$("#chronoSlider").slider({min:0,max:e.length-1}),$('[id*="chronologySliderInput"]').val("["+e[0]+" TO "+e[e.length-1]+"]"),$('[id*="chronologySliderForm"] input[type="submit"]').click()}(a.yearList)}))}},e}((viewerJS=function(t){"use strict";var o=!1,n="",a={fontDownBtn:"",fontUpBtn:"",maxFontSize:18,minFontSize:12,baseFontSize:"14px"};function i(e){return o&&(console.log("---------- _parseFontSize() ----------"),console.log("_parseFontSize: string = ",e)),parseInt(e.replace("px"))}function l(e){o&&(console.log("---------- _saveFontSize() ----------"),console.log("_parseFontSize: size = ",e)),localStorage.setItem("currentFontSize",e)}return t.changeFontSize={init:function(e){o&&(console.log("##############################"),console.log("viewer.changeFontSize.init"),console.log("##############################"),console.log("viewer.changeFontSize.init: config - "),console.log(e)),$.extend(!0,a,e),t.localStoragePossible&&(!function(){o&&console.log("---------- _setFontSize() ----------");var e=localStorage.getItem("currentFontSize");null===e||""===e?localStorage.setItem("currentFontSize",a.baseFontSize):$("html").css("font-size",e)}(),function(){o&&console.log("---------- _setButtonState() ----------");var e=i(localStorage.getItem("currentFontSize"));e===a.minFontSize&&$(a.fontDownBtn).prop("disabled",!0);e===a.maxFontSize&&$(a.fontUpBtn).prop("disabled",!0)}(),$(a.fontDownBtn).on("click",function(){l(n=$("html").css("font-size")),function(e){o&&(console.log("---------- _degradeFontSize() ----------"),console.log("_degradeFontSize: current = ",e));var t=e;--t>=a.minFontSize?($(a.fontDownBtn).prop("disabled",!1),$(a.fontUpBtn).prop("disabled",!1),$("html").css("font-size",t+"px"),l(t+"px")):($(a.fontDownBtn).prop("disabled",!0),$(a.fontUpBtn).prop("disabled",!1))}(i(n))}),$(a.fontUpBtn).on("click",function(){l(n=$("html").css("font-size")),function(e){o&&(console.log("---------- _raiseFontSize() ----------"),console.log("_raiseFontSize: current = ",e));var t=e;++t<=a.maxFontSize?($(a.fontDownBtn).prop("disabled",!1),$(a.fontUpBtn).prop("disabled",!1),$("html").css("font-size",t+"px"),l(t+"px")):($(a.fontDownBtn).prop("disabled",!1),$(a.fontUpBtn).prop("disabled",!0))}(i(n))}))}},t}((viewerJS=function(e){"use strict";var t=!1,o=null,n="",a={},i=null,l={appUrl:"",calendarWrapperSelector:".search-calendar__months",popoverTriggerSelector:'[data-popover-trigger="calendar-po-trigger"]',popoverTitle:"Bitte übergeben Sie den Titel des Werks"};return e.calendarPopover={init:function(e){t&&(console.log("##############################"),console.log("viewer.calendarPopover.init"),console.log("##############################"),console.log("viewer.calendarPopover.init: config - ",e)),$.extend(!0,l,e),$(l.popoverTriggerSelector).on("click",function(){o=$(this),n=encodeURI(o.attr("data-api")),viewerJS.helper.getRemoteData(n).done(function(e){i=function(e,o){t&&(console.log("---------- _getPopoverContent() ----------"),console.log("_getPopoverContent: data = ",e),console.log("_getPopoverContent: config = ",o));var n="",a="";return n+='<ul class="list">',$.each(e,function(e,t){a=o.appUrl+"image/"+t.PI_TOPSTRUCT+"/"+t.THUMBPAGENO+"/"+t.LOGID+"/",n+="<li>",n+='<a href="'+a+'">',n+=t.LABEL,n+="</a>",n+="</li>"}),n+="</ul>"}(e,l),a={placement:"auto bottom",title:l.popoverTitle,content:i,viewport:{selector:l.calendarWrapperSelector},html:!0},$(l.popoverTriggerSelector).popover("destroy"),o.popover(a),o.popover("show")})}),$("body").on("click",function(e){$(e.target).closest(l.popoverTriggerSelector).length||$(l.popoverTriggerSelector).popover("destroy")})}},e}((viewerJS=function(e){"use strict";var v=!1,b={root:"",msg:{resetBookshelves:"",resetBookshelvesConfirm:"",noItemsAvailable:"",selectBookshelf:"",addNewBookshelf:""}};function S(e,t){return v&&(console.log("---------- _addNamedBookshelf() ----------"),console.log("_addNamedBookshelf: root - ",e),console.log("_addNamedBookshelf: name - ",t)),Q($.ajax({url:e+"/rest/bookshelves/user/add/"+t+"/",type:"GET",dataType:"JSON",async:!0}))}function _(e){return v&&(console.log("---------- _addAutomaticNamedBookshelf() ----------"),console.log("_addAutomaticNamedBookshelf: root - ",e)),Q($.ajax({url:e+"/rest/bookshelves/user/add/",type:"GET",dataType:"JSON",async:!0}))}function t(e){return v&&(console.log("---------- _getAllBookshelves() ----------"),console.log("_getAllBookshelves: root - ",e)),Q($.ajax({url:e+"/rest/bookshelves/user/get/",type:"GET",dataType:"JSON",async:!0}))}function w(r){v&&(console.log("---------- _renderBookshelfPopoverList() ----------"),console.log("_renderBookshelfPopoverList: pi - ",r)),t(b.root).then(function(e){var t=$("<ul />").addClass("bookshelf-popup__body-list list"),o=null,n=null,a=null,i=null,l=null;0<e.length?e.forEach(function(e){o=$("<li />"),i="",e.items.forEach(function(e){e.pi==r&&(i='<i class="fa fa-check" aria-hidden="true"></i> ')}),l=$("<span />").text(e.items.length),a=$("<button />").addClass("btn-clean").attr("type","button").attr("data-bookshelf-type","add").attr("data-id",e.id).attr("data-pi",r).text(e.name).prepend(i).append(l),o.append(a),t.append(o)}):(o=$("<li />"),n=$("<span />").addClass("empty").text(b.msg.noItemsAvailable),o.append(n),t.append(o)),$(".bookshelf-popup__body").empty().append(t),$(".bookshelf-popup__body-loader").remove(),$('.bookshelf-popup__body-list [data-bookshelf-type="add"]').on("click",function(){var e,t,o,n,a,i,l=$(this),r=l.attr("data-id"),s=l.attr("data-pi");0<l.find(".fa-check").length?(n=b.root,a=r,i=s,v&&(console.log("---------- _deleteBookshelfItemByPi() ----------"),console.log("_deleteBookshelfItemByPi: root - ",n),console.log("_deleteBookshelfItemByPi: id - ",a),console.log("_deleteBookshelfItemByPi: pi - ",i)),Q($.ajax({url:n+"/rest/bookshelves/user/get/"+a+"/delete/"+i+"/",type:"GET",dataType:"JSON",async:!0}))).then(function(){w(s),y(),c()}).fail(function(e){console.error("ERROR - _deleteBookshelfItemByPi: ",e.responseText)}):(e=b.root,t=r,o=s,v&&(console.log("---------- _addBookshelfItemByPi() ----------"),console.log("_addBookshelfItemByPi: root - ",e),console.log("_addBookshelfItemByPi: id - ",t),console.log("_addBookshelfItemByPi: pi - ",o)),Q($.ajax({url:e+"/rest/bookshelves/user/get/"+t+"/add/"+o+"/",type:"GET",dataType:"JSON",async:!0}))).then(function(){w(s),y(),c()}).fail(function(e){console.error("ERROR - _addBookshelfItemByPi: ",e.responseText)})})}).fail(function(e){console.error("ERROR - _getAllBookshelves: ",e.responseText)})}function y(){v&&console.log("---------- _renderBookshelfNavigationList() ----------");var c=0;t(b.root).then(function(e){var t=$("<ul />").addClass("bookshelf-navigation__dropdown-list list"),o=null,n=null,a=null,i=null,l=null,r=null,s=null;0<e.length?e.forEach(function(e){o=$("<li />"),n=$("<div />").addClass("row no-margin"),a=$("<div />").addClass("col-xs-10 no-padding"),i=$("<div />").addClass("col-xs-2 no-padding"),r=$("<a />").attr("href",b.root+"/bookshelf/"+e.id+"/").text(e.name),s=$("<span />").addClass("bookshelf-navigation__dropdown-list-counter").text(e.items.length),a.append(r),i.append(s),n.append(a).append(i),o.append(n),t.append(o),c+=e.items.length}):(o=$("<li />"),l=$("<span />").addClass("empty").text(b.msg.noItemsAvailable),o.append(l),t.append(o)),$('[data-bookshelf-type="counter"]').empty().text(c),$(".bookshelf-navigation__dropdown-list").empty().append(t)}).fail(function(e){console.error("ERROR - _getAllBookshelves: ",e.responseText)})}function c(){v&&console.log("---------- _setAddedStatus() ----------"),$('[data-bookshelf-type="add"]').each(function(){var e=$(this);!function(t,e){v&&(console.log("---------- _isItemInBookshelf() ----------"),console.log("_isItemInBookshelf: pi - ",e),console.log("_isItemInBookshelf: object - ",t));(o=b.root,n=e,v&&(console.log("---------- _getContainingBookshelfItemByPi() ----------"),console.log("_getContainingBookshelfItemByPi: root - ",o),console.log("_getContainingBookshelfItemByPi: pi - ",n)),Q($.ajax({url:o+"/rest/bookshelves/user/contains/"+n+"/",type:"GET",dataType:"JSON",async:!0}))).then(function(e){if(0==e.length)return t.removeClass("added"),!1;t.addClass("added")}).fail(function(e){console.error("ERROR - _getContainingBookshelfItemByPi: ",e.responseText)});var o,n}(e,e.attr("data-pi"))})}return e.bookshelvesUser={init:function(e){v&&(console.log("##############################"),console.log("viewer.bookshelvesUser.init"),console.log("##############################"),console.log("viewer.bookshelvesUser.init: config - ",e)),$.extend(!0,b,e),y(),$('[data-bookshelf-type="dropdown"]').off().on("click",function(e){e.stopPropagation(),$(".login-navigation__login-dropdown, .login-navigation__user-dropdown, .navigation__collection-panel").hide(),$(".bookshelf-popup").remove(),$(".bookshelf-navigation__dropdown").slideToggle("fast")}),c(),$('[data-bookshelf-type="add"]').off().on("click",function(e){e.stopPropagation(),$(".bookshelf-navigation__dropdown, .login-navigation__user-dropdown").hide();var t=$(this);!function(e,t,o,n,a){v&&(console.log("---------- _renderBookshelfPopup() ----------"),console.log("_renderBookshelfPopup: pi - ",e),console.log("_renderBookshelfPopup: logid - ",t),console.log("_renderBookshelfPopup: page - ",o),console.log("_renderBookshelfPopup: pos - ",n),console.log("_renderBookshelfPopup: size - ",a));var e=e,i=n.top,l=n.left;$(".bookshelf-popup").remove();var r=$("<div />").addClass("bookshelf-popup bottom").css({top:i+a.height+10+"px",left:l-142+a.width/2+"px"}),s=$("<div />").addClass("bookshelf-popup__body-loader");r.append(s);var c=$("<div />").addClass("bookshelf-popup__header").text(b.msg.selectBookshelf),d=$("<div />").addClass("bookshelf-popup__body"),u=$("<div />").addClass("bookshelf-popup__footer"),g=$("<div />").addClass("row no-margin"),p=$("<div />").addClass("col-xs-11 no-padding"),f=$("<input />").attr("type","text").attr("placeholder",b.msg.addNewBookshelf);p.append(f);var h=$("<div />").addClass("col-xs-1 no-padding"),m=$("<button />").addClass("btn-clean").attr("type","button").attr("data-bookshelf-type","add").attr("data-pi",e);h.append(m),g.append(p).append(h),u.append(g),r.append(c).append(d).append(u),$("body").append(r),w(e),$('.bookshelf-popup__footer [data-bookshelf-type="add"]').on("click",function(){var e=$(".bookshelf-popup__footer input").val(),t=$(this).attr("data-pi");""!=e?S(b.root,e).then(function(){$(".bookshelf-popup__footer input").val(""),w(t),y()}).fail(function(e){console.error("ERROR - _addNamedBookshelf: ",e.responseText)}):_(b.root).then(function(){$(".bookshelf-popup__footer input").val(""),w(t),y()}).fail(function(e){console.error("ERROR - _addAutomaticNamedBookshelf: ",e.responseText)})}),$(".bookshelf-popup__footer input").on("keyup",function(e){13==e.which&&$('.bookshelf-popup__footer [data-bookshelf-type="add"]').click()})}(t.attr("data-pi"),t.attr("data-logid"),t.attr("data-page"),t.offset(),{width:t.outerWidth(),height:t.outerHeight()})}),$("body").on("click",function(e){if($(".bookshelf-navigation__dropdown").hide(),0<$(".bookshelf-popup").length){var t=$(e.target),o=$(".bookshelf-popup"),n=o.find("*");t.is(o)||t.is(n)||$(".bookshelf-popup").remove()}}),$("#addBookshelfBtn").off().on("click",function(){var e=$("#addBookshelfInput").val();""!=e?S(b.root,e).then(function(){location.reload()}).fail(function(e){console.error("ERROR - _addNamedBookshelf: ",e.responseText)}):_(b.root).then(function(){location.reload()}).fail(function(e){console.error("ERROR - _addAutomaticNamedBookshelf: ",e.responseText)})}),$("#addBookshelfInput").on("keyup",function(e){13==e.which&&$("#addBookshelfBtn").click()}),$(".view-mirador__link").on("click",function(){var e=$(this).attr("data-bookshelf-id");sessionStorage.setItem("bookshelfId",e)})}},e}((viewerJS=function(e){"use strict";var g=!1,n=0,p={root:"",msg:{resetBookshelves:"",resetBookshelvesConfirm:"",saveItemToSession:""}};function t(e){return g&&(console.log("---------- _getAllSessionElements() ----------"),console.log("_getAllSessionElements: root - ",e)),Q($.ajax({url:e+"/rest/bookshelves/session/get/",type:"GET",dataType:"JSON",async:!0}))}function a(e,t){return g&&(console.log("---------- _isElementSet() ----------"),console.log("_isElementSet: root - ",e),console.log("_isElementSet: pi - ",t)),Q($.ajax({url:e+"/rest/bookshelves/session/contains/"+t+"/",type:"GET",dataType:"JSON",async:!0}))}function i(e,t){return g&&(console.log("---------- _setSessionElement() ----------"),console.log("_setSessionElement: root - ",e),console.log("_setSessionElement: pi - ",t)),Q($.ajax({url:e+"/rest/bookshelves/session/add/"+t+"/",type:"GET",dataType:"JSON",async:!0}))}function f(e,t){return g&&(console.log("---------- _deleteSessionElement() ----------"),console.log("_deleteSessionElement: root - ",e),console.log("_deleteSessionElement: pi - ",t)),Q($.ajax({url:e+"/rest/bookshelves/session/delete/"+t+"/",type:"GET",dataType:"JSON",async:!0}))}function h(){g&&console.log("---------- _setSessionElementCount() ----------"),t(p.root).then(function(e){$('[data-bookshelf-type="counter"]').empty().text(e.items.length)}).fail(function(e){console.error("ERROR - _getAllSessionElements: ",e.responseText)})}function m(){g&&console.log("---------- _renderDropdownList() ----------"),t(p.root).then(function(e){var t=$("<button>").addClass("btn-clean").attr("type","button").attr("data-bookshelf-type","reset").html("<span>"+p.msg.resetBookshelves+'</span><i class="fa fa-trash-o" aria-hidden="true"></i>'),o=$("<ul />").addClass("list"),n=null,a=null,i=null,l=null,r=null,s=null,c=null,d=null,u=null;e.items.length<1&&localStorage.setItem("confirmCounter",0),e.items.forEach(function(e){n=$("<li />"),a=$("<div />").addClass("row no-margin"),i=$("<div />").addClass("col-xs-4 no-padding"),l=$("<div />").addClass("col-xs-7 no-padding"),r=$("<div />").addClass("col-xs-1 no-padding bookshelf-navigation__dropdown-list-remove"),s=$("<div />").addClass("bookshelf-navigation__dropdown-list-image").css("background-image","url("+e.representativeImageUrl+")"),c=$("<h4 />"),d=$("<a />").attr("href",p.root+e.url).text(e.name),u=$("<button />").addClass("btn-clean").attr("type","button").attr("data-bookshelf-type","delete").attr("data-pi",e.pi).html('<i class="fa fa-ban" aria-hidden="true"></i>'),c.append(d),i.append(s),l.append(c),r.append(u),a.append(i).append(l).append(r),n.append(a),o.append(n)}),$(".bookshelf-navigation__dropdown-list").empty().append(o),0<e.items.length?$(".bookshelf-navigation__dropdown-list-reset").empty().append(t):($(".bookshelf-navigation__dropdown").hide(),$(".bookshelf-navigation__dropdown-list-reset").empty()),$('[data-bookshelf-type="delete"]').on("click",function(){var e=$(this).attr("data-pi");f(p.root,e).then(function(){h(),b(),m(),v()})}),$('[data-bookshelf-type="reset"]').on("click",function(){if(!confirm(p.msg.resetBookshelvesConfirm))return!1;var e;(e=p.root,g&&(console.log("---------- _deleteAllSessionElements() ----------"),console.log("_deleteAllSessionElements: root - ",e)),Q($.ajax({url:e+"/rest/bookshelves/session/delete/",type:"GET",dataType:"JSON",async:!0}))).then(function(){localStorage.setItem("confirmCounter",0),h(),b(),m(),v()})})}).fail(function(e){console.error("ERROR - _getAllSessionElements: ",e.responseText)})}function v(){var e;g&&console.log("---------- _renderMiradorLink() ----------"),(e=p.root,g&&(console.log("---------- _getSessionElementCount() ----------"),console.log("_getSessionElementCount: root - ",e)),Q($.ajax({url:e+"/rest/bookshelves/session/count/",type:"GET",dataType:"JSON",async:!0}))).then(function(e){1<e?$(".bookshelf-navigation__dropdown-list-mirador").removeClass("hidden"):$(".bookshelf-navigation__dropdown-list-mirador").addClass("hidden")}).fail(function(e){console.error("ERROR - _getSessionElementCount: ",e.responseText)})}function b(){g&&console.log("---------- _setAddActiveState() ----------"),$('[data-bookshelf-type="add"]').each(function(){var t=$(this),e=t.attr("data-pi");a(p.root,e).then(function(e){e?t.addClass("added"):t.removeClass("added")}).fail(function(e){console.error("ERROR - _isElementSet: ",e.responseText)})})}return e.bookshelvesSession={init:function(e){g&&(console.log("##############################"),console.log("viewer.bookshelvesSession.init"),console.log("##############################"),console.log("viewer.bookshelvesSession.init: config - ",e)),$.extend(!0,p,e),null==localStorage.getItem("confirmCounter")&&localStorage.setItem("confirmCounter",0),m(),v(),$('[data-bookshelf-type="dropdown"]').off().on("click",function(e){e.stopPropagation(),$(".login-navigation__login-dropdown, .login-navigation__user-dropdown, .navigation__collection-panel").hide(),t(p.root).then(function(e){if(!(0<e.items.length))return!1;$(".bookshelf-navigation__dropdown").slideToggle("fast")}).fail(function(e){console.error("ERROR - _getAllSessionElements: ",e.responseText)})}),h(),b(),$('[data-bookshelf-type="add"]').off().on("click",function(){var t=$(this),o=t.attr("data-pi");a(p.root,o).then(function(e){if(n=parseInt(localStorage.getItem("confirmCounter")),e)t.removeClass("added"),f(p.root,o).then(function(){h(),m(),v()});else if(0==n){if(!confirm(p.msg.saveItemToSession))return!1;t.addClass("added"),localStorage.setItem("confirmCounter",1),i(p.root,o).then(function(){h(),m(),v()})}else t.addClass("added"),i(p.root,o).then(function(){h(),m(),v()})}).fail(function(e){console.error("ERROR - _isElementSet: ",e.responseText)})}),$("body").on("click",function(e){var t=$(e.target),o=$(".bookshelf-navigation__dropdown"),n=o.find("*");t.is(o)||t.is(n)||$(".bookshelf-navigation__dropdown").hide()})}},e}((viewerJS=function(){"use strict";var a={currentPage:"",browser:"",sidebarSelector:"#sidebar",contentSelector:"#main",equalHeightRSSInterval:1e3,equalHeightInterval:500,messageBoxSelector:".messages .alert",messageBoxInterval:1e3,messageBoxTimeout:8e3,pageScrollSelector:".icon-totop",pageScrollAnchor:"#top",widgetNerSidebarRight:!1},i={init:function(e){if($.extend(!0,a,e),a.browser=viewerJS.helper.getCurrentBrowser(),console.info("Current Page = ",a.currentPage),console.info("Current Browser = ",a.browser),$('[data-toggle="tooltip"]').tooltip({trigger:"hover"}),!i.localStoragePossible){var t=this.helper.renderWarningPopover("Ihr Browser befindet sich im privaten Modus und unterstützt die Möglichkeit Informationen zur Seite lokal zu speichern nicht. Aus diesem Grund sind nicht alle Funktionen des viewers verfügbar. Bitte verlasen Sie den privaten Modus oder benutzen einen alternativen Browser. Vielen Dank.");$("body").append(t),$('[data-toggle="warning-popover"]').on("click",function(){$(".warning-popover").fadeOut("fast",function(){$(".warning-popover").remove()})})}var o;switch($('[data-toggle="offcanvas"]').click(function(){var e=$(this).children(".fa");$(".row-offcanvas").toggleClass("active"),$(this).toggleClass("in"),e.hasClass("fa-ellipsis-v")?e.removeClass("fa-ellipsis-v").addClass("fa-ellipsis-h"):e.removeClass("fa-ellipsis-h").addClass("fa-ellipsis-v")}),$('[data-toggle="mobilenav"]').on("click",function(){$(".btn-toggle.search").removeClass("in"),$(".header-actions__search").hide(),$(".btn-toggle.language").removeClass("in"),$("#changeLocal").hide(),$("#mobileNav").slideToggle("fast")}),$('[data-toggle="mobile-image-controls"]').on("click",function(){$(".image-controls").slideToggle("fast")}),$('[data-toggle="language"]').on("click",function(){$(".btn-toggle.search").removeClass("in"),$(".header-actions__search").hide(),$(this).toggleClass("in"),$("#changeLocal").fadeToggle("fast")}),$('[data-toggle="search"]').on("click",function(){$(".btn-toggle.language").removeClass("in"),$("#changeLocal").hide(),$(this).toggleClass("in"),$(".header-actions__search").fadeToggle("fast")}),window.matchMedia("(max-width: 768px)").matches&&(0<$(".rss_wrapp").length?setTimeout(function(){viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector)},a.equalHeightRSSInterval):setTimeout(function(){viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector)},a.equalHeightInterval),$(window).on("orientationchange",function(){viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector)})),o=!1,setInterval(function(){0<$(a.messageBoxSelector).size()&&!o&&(o=!0,setTimeout(function(){$(a.messageBoxSelector).each(function(){$(this).fadeOut("slow",function(){$(this).parent().remove()})}),o=!1},a.messageBoxTimeout))},a.messageBoxInterval),$(".collapse").on("show.bs.collapse",function(){$(this).prev().find(".fa").removeClass("fa-arrow-down").addClass("fa-arrow-up")}),$(".collapse").on("hide.bs.collapse",function(){$(this).prev().find(".fa").removeClass("fa-arrow-up").addClass("fa-arrow-down")}),this.pageScroll.init(a.pageScrollSelector,a.pageScrollAnchor),i.localStoragePossible&&(0<$("#image_container").length||"readingmode"===currentPage?(null===localStorage.getItem("currIdDoc")&&localStorage.setItem("currIdDoc","false"),this.helper.saveSidebarTocPosition()):localStorage.setItem("sidebarTocScrollPosition",0)),$('input[id*="searchField"]').on("focus",function(){$(this).val("")}),"undefined"!=typeof jsf&&jsf.ajax.addOnEvent(function(e){var t=e.status,o=document.getElementById("AJAXLoader"),n=document.getElementById("AJAXLoaderSidebarToc");if(n&&o)switch(t){case"begin":n.style.display="block",o.style.display="none";break;case"complete":n.style.display="none",o.style.display="none";break;case"success":$('[data-toggle="tooltip"]').tooltip(),i.localStoragePossible&&(i.helper.saveSidebarTocPosition(),$(".widget-toc-elem-wrapp").scrollTop(localStorage.sidebarTocScrollPosition)),window.matchMedia("(max-width: 768px)").matches&&(viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector),$(window).off().on("orientationchange",function(){viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector)}))}else if(o)switch(t){case"begin":o.style.display="block";break;case"complete":o.style.display="none";break;case"success":$('[data-toggle="tooltip"]').tooltip(),window.matchMedia("(max-width: 768px)").matches&&(viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector),$(window).off().on("orientationchange",function(){viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector)}))}else switch(t){case"success":$('[data-toggle="tooltip"]').tooltip(),window.matchMedia("(max-width: 768px)").matches&&(viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector),$(window).off().on("orientationchange",function(){viewerJS.helper.equalHeight(a.sidebarSelector,a.contentSelector)}))}}),"feedback"===currentPage&&$("#submitFeedbackBtn").attr("disabled",!0),0<$("#widgetNerFacetting").length&&(nerFacettingConfig.sidebarRight=a.widgetNerSidebarRight,this.nerFacetting.init(nerFacettingConfig)),$('#pfAutocomplete_input, [id*=":pfAutocomplete_input"]').on("keyup",function(e){13==e.keyCode&&$('#submitSearch, [id*=":submitSearch"]').click()}),$(".input-integer").on("keypress",function(e){if(e.which<48||57<e.which)return!1}),$(".input-float").on("keypress",function(e){switch(console.log(e),e.which){case 8:case 9:case 13:case 46:case 44:case 43:case 45:return!0;case 118:return e.ctrlKey;default:switch(e.keyCode){case 8:case 9:case 13:return!0;default:return!(e.which<48||57<e.which)}}}),this.tinyConfig.language=currentLang,"adminCmsCreatePage"===currentPage&&(this.tinyConfig.setup=function(e){e.on("change input paste",function(e){tinymce.triggerSave(),createPageConfig.prevBtn.attr("disabled",!0),createPageConfig.prevDescription.show()})}),"overview"===currentPage&&(viewerJS.tinyConfig.menubar=!0,viewerJS.tinyMce.overview()),"undefined"!=typeof jsf&&jsf.ajax.addOnEvent(function(e){switch(e.status){case"success":"overview"===currentPage&&viewerJS.tinyMce.overview(),viewerJS.tinyMce.init(viewerJS.tinyConfig)}}),0<$(".tinyMCE").length&&viewerJS.tinyMce.init(this.tinyConfig),a.browser){case"Chrome":$("img").error(function(){$(this).addClass("broken")});break;case"Firefox":$("img").error(function(){$(this).hide()}),0<$(".image-doublePageView").length&&$(".image-doublePageView").addClass("oneUp");break;case"IE":$("html").addClass("is-IE"),$("img").error(function(){$(this).hide()});break;case"Edge":case"Safari":$("img").error(function(){$(this).hide()})}},tinyConfig:{}};return i}(jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery),cmsJS=function(e){"use strict";var o=!1,n={$highlights:null,$grid:null},a=null,i=null,l=null,r=null,s=null,c=null,d=null,u=null;return e.tileGrid={init:function(e,t){o&&(console.log("##############################"),console.log("cmsJS.tileGrid.init"),console.log("##############################"),console.log("cmsJS.tileGrid.init: config - ",e),console.log("cmsJS.tileGrid.init: data - ",t)),$.extend(!0,n,e),function(e){o&&(console.log("---------- _renderTileGrid() ----------"),console.log("_renderTileGrid: tiles = ",e));e.forEach(function(e){e.hasClass("important")?n.$highlights.append(e):n.$grid.append(e)})}(function(e){o&&(console.log("---------- _getTiles() ----------"),console.log("_getTiles: data = ",e));var t=[];return e.items.forEach(function(e){a=$("<div />"),i=$("<a />"),l=$("<a />"),r=$('<i aria-hidden="true" />'),s=$("<figure />"),c=$("<figcaption />"),d=$("<h3 />"),u=$("<img />"),e.important?a.addClass("tpl-tile-grid__grid-item important"):a.addClass("tpl-tile-grid__grid-item"),""!==e.size&&a.addClass(e.size),u.attr("src",e.name),u.attr("alt",e.title),""!==e.url?(i.attr("href",e.url),i.append(u),s.append(i)):s.append(u),d.text(e.title),s.append(d),c.append(e.caption),""!==e.url&&(l.attr("href",e.url),r.addClass("fa fa-arrow-right"),l.append(r),c.append(l)),s.append(c),a.append(s),t.push(a)}),t}(t))}},e}((cmsJS=function(l){"use strict";var s=!1,t={inputFieldId:"tagInput",tagListId:"tagList",autoSuggestUrl:"",msg:{addTagLabel:"Tag hinzufügen"}};function i(e,t,o){s&&(console.log("---------- _createListElement() ----------"),console.log("_createListElement: value = ",e),console.log("_createListElement: $parent = ",t),console.log("_createListElement: count = ",o)),o||(o=t.children("[id$=_item]").length);var n=t.attr("id"),a=$(".tag-input"),i=$("<li/>");i.attr("id",n+"_"+o+"_item");var l=$('<span class="tag label"/>');l.text(e);var r=$("<span />");r.addClass("tag-terminator"),r.on("click",c),i.append(l),l.append(r),0<a.length?i.insertBefore(a):t.append(i)}function r(e,t){return s&&(console.log("---------- _handleInputChange() ----------"),console.log("_handleInputChange: event = ",e),console.log("_handleInputChange: text = ",t),console.log("on change occured in: ",e.target)),t&&0!==t.length||(t=$(e.target).val()),0<t.trim().length&&(l.tagList.addTag(t),$(e.target).val("")),e.preventDefault(),e.stopPropagation(),!1}function c(e){s&&(console.log("---------- _handleClickTerminator() ----------"),console.log("_handleClickTerminator: event = ",e),console.log("Click on: ",e.currentTarget));var t=$(e.target).parent().parent();l.tagList.deleteTag(t)}return l.tagList={tags:[],$tagListElement:null,autoSuggestUrl:null,init:function(e){if(s&&(console.log("##############################"),console.log("cmsJS.tagList.init"),console.log("##############################"),console.log("cmsJS.tagList.init: config - ",e)),$.extend(!0,t,e),this.$inputField=$("#"+t.inputFieldId),0===this.$inputField.length&&console.log("Data input field not found"),this.$tagListElement=$("#"+t.tagListId),0===this.$tagListElement.length)throw"Tag list element not found";this.autoSuggestUrl=t.autoSuggestUrl,this.tags=function(e){s&&(console.log("---------- _readTags() ----------"),console.log("_readTags: $input = ",e));var t=e.val();t||(t="[]");{if(!(0<t.length))return[];s&&(console.log("---------- _readTags() ----------"),console.log("tagString: ",t));try{var o=JSON.parse(t);return o}catch(e){return console.log("Error reading tags from "+t),[]}}}(this.$inputField),function(e,t){s&&(console.log("---------- _renderList() ----------"),console.log("_renderList: tags = ",e),console.log("_renderList: $ul = ",t));for(var o=0,n=(t.attr("id"),0);n<e.length;n++){var a=e[n];i(a,t,o),o++}!function(e){s&&(console.log("---------- _createTagInputElement() ----------"),console.log("_createTagInputElement: $parent = ",e));var t=$(".media-modal__tags"),o=1,n=e.attr("id"),a=$("<li />");a.addClass("tag-input");var i=$('<input type="text" />');i.attr("id",n+"_inputField"),i.attr("size",o),a.append(i),e.find("ul").append(a),t.on("click",function(){i.focus()}),i.on("change",r),i.on("keypress",function(e){if(o++,i.attr("size",o),13==e.keyCode)return o=1,i.attr("size",o),r(e)}),i.autocomplete({source:function(e,t){Q($.ajax({url:l.tagList.autoSuggestUrl+e.term+"/",type:"GET",datatype:"json"})).then(function(e){t(e)})},appendTo:i.parent(),select:function(e,t){r(e,t.item.value)}})}(t.parent())}(this.tags,this.$tagListElement)},addTag:function(e){s&&(console.log("---------- cms.tagList.addTag() ----------"),console.log("cmsJS.tagList.addTag: tagName = ",e));var t=this.getTag(e);if(t){$(t).fadeOut(100,function(){$(t).fadeIn(100)})}else this.$tagListElement&&i(e,this.$tagListElement),this.saveTags()},deleteTag:function(e){s&&(console.log("---------- cms.tagList.deleteTag() ----------"),console.log("cmsJS.tagList.deleteTag: tag = ",e)),e.remove(),this.saveTags()},saveTags:function(){s&&console.log("---------- cms.tagList.saveTags() ----------"),function(e,t){s&&(console.log("---------- _writeTags() ----------"),console.log("_writeTags: $tags = ",e),console.log("_writeTags: $input = ",t));var o=[];e.each(function(){0<$(this).text().length&&o.push($(this).text())});var n=JSON.stringify(o);t.val(n)}(l.tagList.$tagListElement.children("[id$=_item]"),l.tagList.$inputField)},contains:function(t){s&&(console.log("---------- cms.tagList.contains() ----------"),console.log("cmsJS.tagList.contains: tagName = ",t));var o=!1;return l.tagList.$tagListElement.children("[id$=_item]").each(function(){var e=$(this).text();if(t.trim().toUpperCase()===e.trim().toUpperCase())return!(o=!0)}),o},close:function(){s&&console.log("---------- cms.tagList.close() ----------"),this.$inputField.off(),this.$tagListElement.off(),this.$tagListElement.find(".tag-terminator").off(),this.$tagListElement.find("input").off()},getTags:function(){return s&&console.log("---------- cms.tagList.getTags() ----------"),l.tagList.$tagListElement.children("[id$=_item]")},getTagValues:function(){return s&&console.log("---------- cms.tagList.getTagValues() ----------"),cmsJS.tagList.getTags().map(function(e,t){return $(t).text()})},getTag:function(o){s&&(console.log("---------- cms.tagList.getTag() ----------"),console.log("cmsJS.tagList.getTag: value = ",o));var n=void 0;return cmsJS.tagList.getTags().each(function(e,t){if(cmsJS.tagList.getValue(t).trim().toUpperCase()===o.trim().toUpperCase())return n=t,!1}),n},getValue:function(e){return s&&(console.log("---------- cms.tagList.getValue() ----------"),console.log("cmsJS.tagList.getValue: tag = ",e)),$(e).text()}},l}((cmsJS=function(e){"use strict";var o=!1,n={gridSelector:".tpl-static-grid__grid"},a=null,i=null,l=null,r=null,s=null,c=null,d=null,u=null,g=null;return e.staticGrid={init:function(e,t){o&&(console.log("##############################"),console.log("cmsJS.staticGrid.init"),console.log("##############################"),console.log("cmsJS.staticGrid.init: config - ",e),console.log("cmsJS.staticGrid.init: data - ",t)),$.extend(!0,n,e),a=function(e){o&&(console.log("---------- _buildGrid() ----------"),console.log("_buildGrid: data = ",e));return i=$('<div class="row" />'),e.items.forEach(function(e){l=$('<div class="col-xs-6 col-sm-3" />'),r=$('<div class="grid-tile" />'),s=$('<div class="grid-tile__title" />'),d=$("<h4 />"),c=$("<a />"),""!==e.url?c.attr("href",e.url):c.attr("href","#"),c.attr("title",e.title),c.append(e.title),d.append(c),(u=$('<div class="grid-tile__image" />')).css("background-image","url("+e.name+")"),g=$("<a />"),""!==e.url?g.attr("href",e.url):g.attr("href","#"),s.append(d),r.append(s),u.append(g),r.append(s),r.append(u),l.append(r),i.append(l)}),i}(t),$(n.gridSelector).append(a)}},e}((cmsJS=function(e){"use strict";var p=!1,f={collectionsSelector:".tpl-stacked-collection__collections",collectionDefaultThumb:"",displayLanguage:"de",msg:{noSubCollectionText:""}};function h(e,t){if(e){if("string"==typeof e)return e;if(Array.isArray(e)){var o;for(var n in e){var a=e[n];if("string"==typeof a)return a;var i=a["@value"],l=a["@language"];if(t==l)return i;o&&"en"!=l||(o=i)}return o}return e["@value"]}}function m(e,t){p&&(console.log("---------- _getMetadataValue() ----------"),console.log("_getMetadataValue: collection = ",e),console.log("_getMetadataValue: label = ",t));var o="";return e.metadata.forEach(function(e){h(e.label,f.displayLanguage)==t&&(o=h(e.value,f.displayLanguage))}),o}return e.stackedCollection={init:function(e,t){p&&(console.log("##############################"),console.log("cmsJS.stackedCollections.init"),console.log("##############################"),console.log("cmsJS.stackedCollections.init: config - ",e),console.log("cmsJS.stackedCollections.init: data - ",t)),$.extend(!0,f,e),function(e){p&&(console.log("---------- _renderCollections() ----------"),console.log("_renderCollections: data = ",e));var t=0,o=$("<div />").attr("id","stackedCollections").attr("role","tablist").addClass("panel-group"),n=null,a=null,i=null,l=null,r=null,s=null,c=null,d=null,u=null,g=null;e.collections.forEach(function(e){console.log("creationg collection ",e),t++,n=$("<div />").addClass("panel"),a=$("<div />").addClass("panel-heading"),r=$("<h4 />").addClass("panel-title"),s=$("<a />").text(h(e.label,f.displayLanguage)+" ("+m(e,"volumes")+")"),0<m(e,"subCollections")?s.attr("href","#collapse-"+t).attr("role","button").attr("data-toggle","collapse").attr("data-parent","#stackedCollections").attr("aria-expanded","false"):s.attr("href",e.rendering["@id"]),r.append(s),c=$("<div />").addClass("panel-rss"),d=$("<a />").attr("href",e.related["@id"]).attr("target","_blank").html('<i class="fa fa-rss" aria-hidden="true"></i>'),c.append(d),i=$("<div />").addClass("panel-thumbnail"),l=e.thumbnail?$("<img />").attr("src",e.thumbnail).addClass("img-responsive"):$("<img />").attr("src",f.collectionDefaultThumb).addClass("img-responsive"),i.append(l),a.append(i).append(r).append(c),u=$("<div />").attr("id","collapse-"+t).attr("role","tabpanel").attr("aria-expanded","false").addClass("panel-collapse collapse"),g=$("<div />").addClass("panel-body").append(function(e){p&&(console.log("---------- _renderSubCollections() ----------"),console.log("_renderSubCollections: url = ",e));var t=$("<ul />").addClass("list"),o=null,n=null,a=null;return $.ajax({url:e,type:"GET",datatype:"JSON"}).then(function(e){o=$("<li />"),$.isEmptyObject(e.collections)?(n=$("<a />").attr("href",e.rendering["@id"]).text(f.msg.noSubCollectionText+"."),o.append(n),t.append(o)):e.collections.forEach(function(e){n=$("<a />").attr("href",e.rendering["@id"]).addClass("panel-body__collection").text(h(e.label,f.displayLanguage)+" ("+m(e,"volumes")+")"),a=$("<a />").attr("href",e.related["@id"]).attr("target","_blank").addClass("panel-body__rss").html('<i class="fa fa-rss" aria-hidden="true"></i>'),o.append(n).append(a),t.append(o)})}),t}(e["@id"])),u.append(g),n.append(a).append(u),o.append(n),$(f.collectionsSelector).append(o)})}(t)},readIIIFPresentationStringValue:function(e,t){return h(e,t)}},e}((cmsJS=function(i){"use strict";var r=!1,n=0,a=!1,l=null,s="sortposition";function c(e,t){r&&(console.log("cmsJS.sortableList _handleBeforeDropFromAvailable: event - ",e),console.log("cmsJS.sortableList _handleBeforeDropFromAvailable: ui - ",t));var o=$(t.item);o.find("table").each(function(e,t){var o=$(t).find("input");if(0<o.length){var n=!1;o.each(function(e,t){if($(t).prop("checked"))return!(n=!0)}),n||o.first().prop("checked",!0)}}),a&&"visibleItemList"===o.parent().attr("id")&&o.clone().appendTo($("#availableItemList"))}function d(e,t){r&&(console.log("cmsJS.sortableList _handleBeforeDropFromVisible: event - ",e),console.log("cmsJS.sortableList _handleBeforeDropFromVisible: ui - ",t));var o=$(t.item);a&&"availableItemList"===o.parent().attr("id")&&t.item.remove()}function u(){r&&console.log("cmsJS.sortableList _handleDrop"),g()}function g(){r&&console.log("cmsJS.sortableList _updateAllSortIcons"),$("#visibleItemList").children("li").each(function(){null!=$(this).attr(s)&&e($(this))}),$("#availableItemList").children("li").each(function(){null!=$(this).attr(s)&&e($(this))})}function e(e){if(r&&console.log("cmsJS.sortableList _updateSortIcons: item - ",e),"visibleItemList"===e.parent().attr("id")){if(e.children(".menu-item__level").show(),-1===f(e.prev()))for(;0<f(e);)i.sortableList.decreaseLevel(e);0===f(e)?(e.find(".left").css("visibility","hidden"),e.find(".right").css("visibility","hidden"),e.css("margin-left","0px")):(e.find(".left").css("visibility","visible"),e.find(".right").css("visibility","visible"),e.css("margin-left",f(e)*n+"px")),f(e)>f(e.prev())?(e.find(".left").css("visibility","visible"),e.find(".right").css("visibility","hidden")):(e.find(".left").css("visibility","visible"),e.find(".right").css("visibility","visible"))}else e.children(".menu-item__level").hide()}function p(e){r&&console.log("cmsJS.sortableList _getJQueryItem: element - ",e);for(var t=$(e);null!==t&&void 0===t.attr(s);)t=t.parent();return t}function f(e){r&&console.log("cmsJS.sortableList _getLevel: item - ",e);var t=e.attr(s);if(null==t)return-1;var o=t.substr(t.indexOf("?")+1);return parseInt(o)}function h(e,t){r&&(console.log("cmsJS.sortableList _changePos: item - ",e),console.log("cmsJS.sortableList _changePos: diff - ",t));var o=e.attr(s);if(null==o)return-1;var n=o.substr(o.indexOf("?")+1),a=o.substr(o.indexOf("_")+1),i=parseInt(a),l=parseInt(n)+t;return e.attr(s,"item_"+i+"?"+l),l}function m(){r&&console.log("cmsJS.sortableList _serializeVisibleItems");var e=$("#visibleItemList").sortable("serialize",{key:"item",attribute:s});null!==l&&(l.value=e)}return i.sortableList={init:function(e,t,o){r&&(console.log("##############################"),console.log("cmsJS.sortableList.init"),console.log("##############################"),console.log("cmsJS.sortableList.init: indent - ",e),console.log("cmsJS.sortableList.init: allowMultiple - ",t),console.log("cmsJS.sortableList.init: inputTextField - ",o.sortablesConfig.componentListInput)),n=e,a=t,null===(l=o.sortablesConfig.componentListInput)&&console.warn("Input field for item order not found: No order information can be saved!"),0===o.sortablesConfig.visibleItemList.length&&console.error("No container for active items found. Cannot initialize sortable"),0===o.sortablesConfig.availableItemList.length&&console.error("No container for available items found. Cannot initialize sortable"),g(),r&&console.log("Make sortable ",o.sortablesConfig.visibleItemList),o.sortablesConfig.visibleItemList.sortable({update:m,connectWith:"#availableItemList"}),r&&console.log("Make sortable ",o.sortablesConfig.availableItemList),o.sortablesConfig.availableItemList.sortable({update:m,connectWith:"#visibleItemList",helper:"clone"}),m(),$("#availableItemList").on("sortbeforestop",c),$("#visibleItemList").on("sortbeforestop",d),$("#availableItemList").on("sortstop",u),$("#visibleItemList").on("sortstop",u)},decreaseLevel:function(e,t){r&&(console.log("cmsJS.sortableList.decreaseLevel: element - ",e),console.log("cmsJS.sortableList.decreaseLevel: applyToNext - ",t));var o=p(e);if(0<f(o)&&(h(o,-1),t))for(var n=o.next();null!==n&&f(n)>f(o)+1;)i.sortableList.decreaseLevel(n,!1),n=n.next();m(),g()},increaseLevel:function(e,t){r&&(console.log("cmsJS.sortableList.increaseLevel: element - ",e),console.log("cmsJS.sortableList.increaseLevel: applyToNext - ",t));var o=p(e),n=o.prev();if(f(o)<=f(n)&&(h(o,1),t))for(var a=o.next();null!==a&&f(a)>=f(o);)i.sortableList.increaseLevel(a,!1),a=a.next();m(),g()},save:function(e){void 0!==e&&"begin"!==e.status||m()}},i}((cmsJS=function(e){"use strict";var m=!1,v={rssFeedSelector:".tpl-rss__feed"};return e.rssFeed={init:function(e,t){m&&(console.log("##############################"),console.log("cmsJS.rssFeed.init"),console.log("##############################"),console.log("cmsJS.rssFeed.init: config - ",e),console.log("cmsJS.rssFeed.init: data - ",t)),$.extend(!0,v,e),function(e){m&&(console.log("---------- _renderRssFeed() ----------"),console.log("_renderRssFeed: data = ",e));var t=null,o=null,n=null,a=null,i=null,l=null,r=null,s=null,c=null,d=null,u=null,g=null,p=null,f=null,h=null;e.items.forEach(function(e){(t=$("<div />")).addClass("tpl-rss__item"),i=$("<div />").addClass("row"),l=$("<div />").addClass("col-xs-3"),s=$("<div />").addClass("tpl-rss__item-image"),d=$("<a />").attr("href",e.link),c=$("<img />").attr("src",e.description.image).addClass("img-responsive"),d.append(c),s.append(d),l.append(s),r=$("<div />").addClass("col-xs-9"),o=$("<div />").addClass("tpl-rss__item-title"),n=$("<h3 />"),a=$("<a />").attr("href",e.link).text(e.title),n.append(a),o.append(n),u=$("<div />").addClass("tpl-rss__item-date"),g=new Date(e.pubDate),u.text(g.toLocaleString()),p=$("<dl />").addClass("tpl-rss__item-metadata dl-horizontal"),e.description.metadata.forEach(function(e){f=$("<dt />").text(e.label+":"),h=$("<dd />").text(e.value),p.append(f).append(h)}),r.append(o).append(u).append(p),i.append(l).append(r),t.append(i),$(v.rssFeedSelector).append(t)})}(t)}},e}((cmsJS=function(e){"use strict";var o=!1,n=null,a={$grid:null,loaderSelector:".tpl-masonry__loader"},i=null,l=null,r=null,s=null,c=null,d=null,u=null,g=null;return e.masonry={init:function(e,t){o&&(console.log("##############################"),console.log("cmsJS.masonry.init"),console.log("##############################"),console.log("cmsJS.masonry.init: config - ",e),console.log("cmsJS.masonry.init: data - ",t)),$.extend(!0,a,e),$(a.loaderSelector).show(),function(e){o&&(console.log("---------- _renderMasonryGrid() ----------"),console.log("_renderMasonryGrid: data = ",e));e.items.forEach(function(e){i=$("<div />"),e.important?i.addClass("grid-item important"):i.addClass("grid-item"),s=$("<div />"),""!==e.url&&((c=$("<a />")).attr("href",e.url),c.attr("title",e.title)),s.addClass("grid-item-title"),s.text(e.title),""!==e.url?(c.append(s),i.append(c)):i.append(s),""!==e.caption&&((d=$("<div />")).addClass("grid-item-caption"),d.html(e.caption),(u=$("<h4 />")).text(e.title),d.prepend(u),""!==e.url?((g=$("<a />")).attr("href",e.url),g.attr("title",e.title),g.append(d),i.append(g)):i.append(d)),(l=$("<img />")).attr("src",e.name),l.addClass("img-responsive"),""!==e.url?((r=$("<a />")).attr("href",e.url),r.attr("title",e.title),r.append(l),i.append(r)):i.append(l),a.$grid.append(i)})}(t),(n=a.$grid.imagesLoaded(function(){n.masonry({itemSelector:".grid-item",columnWidth:".grid-sizer",gutter:".gutter-sizer",percentPosition:!0})})).on("layoutComplete",function(e,t){$(a.loaderSelector).hide(),a.$grid.addClass("ready")})}},e}((cmsJS=function(e){"use strict";var o=!1,t={},n=[],a=[],l={appUrl:"",locations:"",mapboxAccessToken:"pk.eyJ1IjoibGlydW1nYnYiLCJhIjoiY2lobjRzamkyMDBnM3U5bTR4cHp0NDdyeCJ9.AjNCRBlBb57j-dziFxf58A",mapBoxContainerSelector:"widgetGeoLocationsMap",mapBoxContainerEnlargedSelector:"widgetGeoLocationsMapEnlarged",mapBoxStyle:"mapbox://styles/lirumgbv/cii024wxn009aiolzgy2zlycj",msg:{propertiesLink:""}};return e.geoLocations={init:function(e){o&&(console.log("##############################"),console.log("cms.geoLocations.init"),console.log("##############################"),console.log("cms.geoLocations.init: config - ",e)),$.extend(!0,l,e),0<$("#widgetGeoLocationsMap").length&&(mapboxgl.accessToken=l.mapboxAccessToken,a=function(e){o&&console.log("---------- _getCenterCoords() ----------");var t=[];""!=(e=JSON.parse(e)).centerLocation.longitude||""!=e.centerLocation.latitude?(t.push(e.centerLocation.longitude),t.push(e.centerLocation.latitude)):(t.push(e.locations[0].longitude),t.push(e.locations[0].latitude));return t}(l.locations),n=function(e){o&&(console.log("---------- _getMapFeatures() ----------"),console.log("_getMapFeatures: infos - ",e));var a=[],i="",e=JSON.parse(e);return $.each(e.locations,function(e,t){if(null!=t.link&&-1!=t.link.indexOf("/sammlung/")){var o=t.link;i=o.replace("/sammlung/","").replace("/","")}var n={type:"Feature",geometry:{type:"Point",coordinates:[t.longitude,t.latitude]},properties:{infos:t.infos+'<br /><a href="'+l.appUrl+t.link+'" data-collection="'+(""!==i?i:"false")+'">'+l.msg.propertiesLink+"</a>"}};a.push(n)}),a}(l.locations),(t=new mapboxgl.Map({container:l.mapBoxContainerSelector,style:l.mapBoxStyle,center:a,zoom:12.5,interactive:!0})).on("style.load",function(){t.addSource("markers",{type:"geojson",data:{type:"FeatureCollection",features:n}}),t.addLayer({id:"markers",type:"symbol",source:"markers",layout:{"icon-image":"pin","icon-allow-overlap":!0}}),t.addControl(new mapboxgl.FullscreenControl),t.addControl(new mapboxgl.NavigationControl)}),t.on("click","markers",function(e){(new mapboxgl.Popup).setLngLat(e.features[0].geometry.coordinates).setHTML(e.features[0].properties.infos).addTo(t),$(".mapboxgl-popup-content a").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),o=$(this).attr("data-collection");"false"===o?localStorage.setItem("sliderImagesFrom",0):localStorage.setItem("sliderImagesFrom",o),window.location.href=t})}))}},e}((cmsJS=function(e){"use strict";var t={selectedPageID:null,inputFields:null,prevBtn:null,prevDescription:null,saveBtn:null,sortablesConfig:{}};return e.createPage={init:function(e){$.extend(!0,t,e),null===t.selectedPageID&&(cmsJS.createPage.disablePreview(),t.prevDescription.show()),t.inputFields.on("change input paste",function(){cmsJS.createPage.disablePreview(),t.prevDescription.show()}),cmsJS.createPage.initSortables(t),"false"===localStorage.getItem("previewStatus")?(t.prevBtn.attr("disabled",!0),t.prevDescription.show()):(t.prevBtn.attr("disabled",!1),t.prevDescription.hide(),t.prevBtn.on("click",function(){var e=$(this).attr("data-previewUrl");window.open(e,"_blank")}))},initSortables:function(e){if(e.sortablesConfig.visibleItemList=$(e.sortablesConfig.visibleItemList),e.sortablesConfig.availableItemList=$(e.sortablesConfig.availableItemList),!(0<e.sortablesConfig.availableItemList.length))return!1;cmsJS.sortableList.init(0,!1,e),e.sortablesConfig.editButton.on("click",function(){$(this).hasClass("fa-pencil-square-o")?$(this).removeClass("fa-pencil-square-o").addClass("fa-times"):$(this).removeClass("fa-times").addClass("fa-pencil-square-o"),$(this).parent(".sidebar-editor-widget-item-header").next(".sidebar-editor-widget-item-body").slideToggle("slow")}),e.sortablesConfig.availableItemList.on("sortbeforestop",function(e,t){"visibleItemList"===$(t.item).parent().attr("id")&&cmsJS.createPage.disablePreview()}),e.sortablesConfig.visibleItemList.on("sortbeforestop",function(){cmsJS.createPage.disablePreview()})},disablePreview:function(){localStorage.setItem("previewStatus","false")},enablePreview:function(){localStorage.setItem("previewStatus","true")}},e}((cmsJS=function(){"use strict";var e={init:function(){jsf.ajax.addOnEvent(function(e){var t=e.status,o=document.getElementById("AJAXLoader");if(o)switch(t){case"begin":o.style.display="block";break;case"complete":o.style.display="none"}})},dataTables_de:{sEmptyTable:"Keine Daten in der Tabelle vorhanden",sInfo:"_START_ bis _END_ von _TOTAL_ Einträgen",sInfoEmpty:"0 bis 0 von 0 Einträgen",sInfoFiltered:"(gefiltert von _MAX_ Einträgen)",sInfoPostFix:"",sInfoThousands:".",sLengthMenu:"_MENU_ Einträge anzeigen",sLoadingRecords:"Wird geladen...",sProcessing:"Bitte warten...",sSearch:"Suchen",sZeroRecords:"Keine Einträge vorhanden.",oPaginate:{sFirst:"Erste",sPrevious:"Zurück",sNext:"Nächste",sLast:"Letzte"},oAria:{sSortAscending:": aktivieren, um Spalte aufsteigend zu sortieren",sSortDescending:": aktivieren, um Spalte absteigend zu sortieren"}},dataTables_en:{sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sZeroRecords:"No matching records found",oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"}},dataTables_es:{sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}};return e}(jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery))||{},jQuery);
//# sourceMappingURL=viewer.min.js.map